import F from"./PsLabelCaption2.b868a078.js";import L from"./PsErrorDialog.eea8f5d3.js";import{d as D,Z as V,p as R,i as m,bB as I,j as z,c as O,b as r,a as d,w as t,n as J,F as Z,ab as G,A as w,B as N,r as p,o as M,q as i,t as n,f as Q,g as X}from"./app.2982e019.js";import{P as Y}from"./PsIcon.e7a5adcd.js";import ee from"./PsLabelCaption.54d4aa23.js";import{W as re}from"./WelcomeImage.b46c48f6.js";import oe from"./PsFrontendLayout.69775a00.js";import ae from"./PsLabelHeader3.f46ed4f5.js";import{P as te}from"./PsCard.1a3f6d6f.js";import se from"./PsInput.5d0c1579.js";import{P as ie}from"./PsInputWithRightIcon.b34d7fa0.js";import ne from"./PsLabel.c51f2c9d.js";import le from"./PsButton.7f6705bd.js";import{P as de}from"./PsCheckboxValue.a24aa2fd.js";import ce from"./PsLabelTitle.ddb6fa87.js";import{P as fe}from"./PsLoading.0a981307.js";import{f as x}from"./index.esm.8fcef60c.js";import"./index.esm.7ce161a7.js";import{u as me}from"./AuthStore.abfd19f8.js";import{U as pe}from"./UserRegisterParameterHolder.c0325365.js";import{c as ue}from"./PsApiService.9afc2356.js";import ye from"./PrivacyModal.885cfed4.js";import{u as _e}from"./ThemeStore.40343845.js";import{_ as ge}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsModal.36ad7f82.js";import"./vue-neat-modal.2bf17e6b.js";import"./PsLine.ea3266c0.js";import"./LanguageStore.8f1cddd7.js";import"./PsIcon.515a10c8.js";import"./Icons.c01eddd9.js";import"./FooterView.722f89eb.js";import"./FooterLinkSection.2922917e.js";import"./PsLink.7aa92bdc.js";import"./PsRouteLink.c57ebe2e.js";import"./ProductParameterHolder.4354be0b.js";import"./ps_constants.0e2a11f9.js";import"./PsValueStore.eb9430a0.js";import"./AppInfoStore.f8d22516.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./CustomFieldStore.79b51a65.js";import"./PsStore.6f734180.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsNavTabBar.a1e78a20.js";import"./PsDropdown.2a6cc373.js";import"./PsDropdownSelect.ce61e1c2.js";import"./PsIconToggle.e81615f0.js";import"./PsInputWithLeftIcon.f3f18e1b.js";import"./ItemLocationTownshipStore.fe0ada29.js";import"./ItemLocation.d1b92a80.js";import"./LocationParameterHolder.9e411c2e.js";import"./PsUtils.bbfda905.js";import"./AppInfoParameterHolder.e24d894d.js";import"./PsNavBar.15a584b5.js";import"./UserStore.cc6d36cc.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./ProductRelation.0b376978.js";import"./UserListParameterHolder.d110b747.js";import"./ApiStatus.5720ba0b.js";import"./auth.esm.be6b9a90.js";import"./UserUnReadMessageParameterHolder.81a68b74.js";import"./AddToCartStore.71386b4c.js";import"./PsNotificationBox.7fffda98.js";import"./ProductStore.a3320c3f.js";import"./Phone.45f97258.js";import"./Product.29c94914.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemCurrency.91c8ce91.js";import"./Vendor.d946ee87.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./NotificationStore.cd066252.js";import"https://unpkg.com/delayed-scroll-restoration-polyfill@0.1.1/index.js";import"./NotificationStore.af68b63a.js";import"./NotiUnRegisterHolder.eefb692e.js";import"./PsLabel.8e7b338e.js";import"./AboutUsStore.cd209350.js";const be=D({components:{Head:V,PsLabelHeader3:ae,PsCard:te,PsInput:se,PsInputWithRightIcon:ie,PsLabel:ne,PsButton:le,PsIcon:Y,PsCheckboxValue:de,PsLabelCaption:ee,PsLabelTitle:ce,PsLoading:fe,Link:R,PsErrorDialog:L,PsLabelCaption2:F,WelcomeImage:re,PrivacyModal:ye},layout:oe,props:["backendSetting","firebaseConfig","webPushKey","appUrl","project","tokenForFCM"],setup(e){const o=me(),f=new pe,$=m(""),E=m(""),T=m(""),S=m(""),P=m(""),c=m(""),u=m(),_=m(!1),g=m(!1),h=_e(),C=m(),H=m(!0),U=m(!0);let a=I({name:"",username:"",email:"",password:"",password_confirmation:"",terms:!1,deviceToken:"",headerToken:"",loginMethod:"",google_id:"",profile_photo_url:"",registerMethod:""});const j=JSON.parse(e.firebaseConfig);x.apps.length<1&&x.initializeApp(j);const v=x.messaging.isSupported()?x.messaging():null;v&&Notification.requestPermission().then(l=>{console.log(l==="granted"?"Notification permission granted.":"Unable to get permission to notify.")});function s(l){g.value=l}function B(){C.value.openModal(s)}async function A(l,k){v&&await G.post(route("firebase.topicSubscribeForNoti"),{token:l,topic:k}).then(function(b){console.log("Subscribed to "+k+".Status Code is "+b.status)}).catch(function(b){console.log(b)})}z(async()=>{if(h.initDarkMode(),"serviceWorker"in navigator){if(v){let l=e.appUrl,k=l+"/firebase-messaging-sw.js";l.endsWith("/")&&(k=l+"firebase-messaging-sw.js"),navigator.serviceWorker.register(k).then(function(b){v.getToken({vapidKey:e.webPushKey,serviceWorkerRegistration:b}).then(y=>{y&&(console.log("current token for client: ",y),localStorage.deviceToken=y,A(y,"fe_broadcast"))}).catch(y=>{console.log("An error occurred while retrieving token. ",y),localStorage.deviceToken="errorToken"})}).catch(function(b){localStorage.deviceToken="errorToken",console.log("Service worker registration failed, error:",b)})}}else localStorage.deviceToken="errorToken",console.log("no serviceWorker in navigator")});async function W(){let l=!0;if((a.name==""||a.name==null)&&(E.value="Name field is required",l=!1),(a.username==""||a.username==null)&&($.value="User Name field is required",l=!1),(a.password_confirmation==""||a.password_confirmation==null)&&(S.value="Confirm Password field is required",l=!1),(a.email==""||a.email==null)&&(P.value="Email field is required",l=!1),(a.password==""||a.password==null)&&(T.value="Password field is required",l=!1),a.password!==a.password_confirmation&&(S.value="Password and confirm password need to be same",l=!1),l!=!0){window.scrollTo(0,0);return}if(!g.value){u.value.openModal(w("login__privacy_policy"),w("login__need_to_agree_privacy"),w("core__fe_btn_ok"),()=>{B()});return}_.value=!0;const k=new Date;localStorage.headerToken=localStorage.deviceToken+k.getTime();const b=localStorage.headerToken;f.userEmail=a.email,f.userName=a.username,f.name=a.name,f.userPassword=a.password,f.name=a.name,f.deviceToken=localStorage.deviceToken,f.platformName="Browser",f.deviceInfo="Browser",f.deviceId=localStorage.deviceToken;const y=await o.registerUser(f);y.status==ue.SUCCESS?y.data.needVerify==1?(_.value=!1,N.post(route("verifyEmail"),I({email:a.email,user_id:y.data.userId,password:a.password}))):(a.loginMethod="normal",a.deviceToken=localStorage.deviceToken,a.headerToken=b,a.loginMethod="normal",await o.signInWithEmailAndPassword(a.email,a.email)&&(_.value=!1,a.transform(q=>({...q})).post(route("login"),{onFinish:()=>a.reset("password")}))):u.value.openModal(w("ps_error_dialog__error"),y.message,w("core__fe_btn_ok"),()=>{}),_.value=!1}function K(){N.get(route("login"))}return{singinInClicked:K,authStore:o,paramHolder:f,usernameError:$,emailError:P,displayNameError:c,submit:W,form:a,ps_error_dialog:u,themeStore:h,nameError:E,pswError:T,confpswError:S,isHide:H,isHide1:U,loading:_,agreePrivacyPolicyClicked:B,agreePrivacyPolicy:g,privacy_modal:C}}}),ve={class:"flex flex-row items-center justify-center min-h-screen mb-6 bg-feAchromatic-50 dark:bg-feAchromatic-900"},ke={class:"flex flex-row h-auto overflow-hidden rounded-md shadow-md sm:mt-32 lg:mt-36 mt-28 w-98 lg:w-202"},Se={class:"flex-col items-center justify-center hidden h-auto w-100 bg-feSecondary-900 lg:flex"},he={class:"w-65 h-50"},we={class:"flex flex-row space-x-4 text-feSecondary-50 dark:text-feSecondary-900 rtl:space-x-reverse"},Pe={class:"w-full px-4 pb-10 lg:w-100 bg-feAchromatic-50 dark:bg-feSecondary-800 sm:px-10"},Ce={class:"flex justify-center"},xe={class:"mb-4"},$e={class:"mb-4"},Ee={class:"mb-4"},Te={class:"mb-4"},He={class:"mb-8"},Ue={class:"flex flex-row items-start justify-start mb-6"},je={class:"block mt-8"},Be={class:"flex flex-row justify-center my-8"};function Ie(e,o,f,$,E,T){var v;const S=p("Head"),P=p("welcome-image"),c=p("ps-label"),u=p("ps-icon"),_=p("ps-input"),g=p("ps-label-caption"),h=p("ps-input-with-right-icon"),C=p("ps-checkbox-value"),H=p("ps-loading"),U=p("ps-button"),a=p("ps-error-dialog"),j=p("privacy-modal");return M(),O(Z,null,[r(S,{title:e.$t("core__fe_register")},null,8,["title"]),d("div",{class:J(e.themeStore.isDarkMode?"dark":"")},[d("div",ve,[d("div",ke,[d("div",Se,[d("div",he,[r(P,{baseProjectId:(v=e.$page.props.project)==null?void 0:v.base_project_id},null,8,["baseProjectId"])]),r(c,{class:"mt-6 mb-2 text-lg font-semibold",textColor:"text-feSecondary-50"},{default:t(()=>[i(n(e.$t("login__fe_title_best_deal")),1)]),_:1}),r(c,{class:"mx-10 mb-2 text-base font-normal text-center",textColor:"text-feSecondary-200"},{default:t(()=>[i(n(e.$t("login__fe_description_best_deal")),1)]),_:1}),d("div",we,[r(u,{name:"facebookCircle"}),r(u,{name:"instagramCircle"}),r(u,{name:"twitter"}),r(u,{name:"pinterest"}),r(u,{name:"linkedIn"})])]),d("div",Pe,[d("div",Ce,[r(c,{class:"justify-center mt-6 mb-6 text-2xl font-senibold"},{default:t(()=>[i(n(e.$t("core__fe_register_title")),1)]),_:1})]),d("div",null,[d("div",xe,[r(c,{class:"mb-2",textColor:"text-feSecondary-800 dark:text-feSecondary-200"},{default:t(()=>[i(n(e.$t("core__fe_name")),1)]),_:1}),r(_,{type:"text",value:e.form.name,"onUpdate:value":o[0]||(o[0]=s=>e.form.name=s),onKeypress:o[1]||(o[1]=s=>e.nameError=""),class:"placeholder-feSecondary-800 dark:placeholder-feSecondary-500",theme:"text-feSecondary-500 dark:bg-feSecondary-800",defaultBorder:"border border-feSecondary-200 hover:border-feSecondary-400 dark:border-feSecondary-400 hover:dark:border-feSecondary-50 focus:outline-none focusr_border-none focus:ring-2 focus:ring-fePrimary-300 ring-fePrimary-300 placeholder-feSecondary-500 dark:placeholder-feSecondary-400",placeholder:e.$t("core__fe_name_placeholder"),autofocus:""},null,8,["value","placeholder"]),r(c,{class:"mt-2 text-xs",textColor:" text-feSecondary-400 dark:text-feSecondary-300"},{default:t(()=>[i(n(e.$t("core__fe_name_descriotion")),1)]),_:1}),r(g,{textColor:"text-feError-500 ",class:"block mt-2"},{default:t(()=>[i(n(e.nameError),1)]),_:1})]),d("div",$e,[r(c,{class:"mb-2",textColor:"text-feSecondary-800 dark:text-feSecondary-200"},{default:t(()=>[i(n(e.$t("core__fe_username")),1)]),_:1}),r(_,{type:"text",value:e.form.username,"onUpdate:value":o[2]||(o[2]=s=>e.form.username=s),onKeypress:o[3]||(o[3]=s=>e.usernameError=""),class:"placeholder-feSecondary-800 dark:placeholder-feSecondary-500",theme:"text-feSecondary-500 dark:bg-feSecondary-800",defaultBorder:"border border-feSecondary-200 hover:border-feSecondary-400 dark:border-feSecondary-400 hover:dark:border-feSecondary-50 focus:outline-none focusr_border-none focus:ring-2 focus:ring-fePrimary-300 ring-fePrimary-300 placeholder-feSecondary-500 dark:placeholder-feSecondary-400",placeholder:e.$t("core__fe_username_placeholder")},null,8,["value","placeholder"]),r(c,{class:"mt-2 text-xs",textColor:" text-feSecondary-400 dark:text-feSecondary-300"},{default:t(()=>[i(n(e.$t("username__fe_valid_description")),1)]),_:1}),r(g,{textColor:"text-feError-500 ",class:"block mt-2"},{default:t(()=>[i(n(e.usernameError),1)]),_:1})]),d("div",Ee,[r(c,{class:"mb-2",textColor:"text-feSecondary-800 dark:text-feSecondary-200"},{default:t(()=>[i(n(e.$t("core__fe_email")),1)]),_:1}),r(_,{type:"email",value:e.form.email,"onUpdate:value":o[4]||(o[4]=s=>e.form.email=s),onKeypress:o[5]||(o[5]=s=>e.emailError=""),class:"placeholder-feSecondary-800 dark:placeholder-feSecondary-500",theme:"text-feSecondary-500 dark:bg-feSecondary-800",defaultBorder:"border border-feSecondary-200 hover:border-feSecondary-400 dark:border-feSecondary-400 hover:dark:border-feSecondary-50 focus:outline-none focusr_border-none focus:ring-2 focus:ring-fePrimary-300 ring-fePrimary-300 placeholder-feSecondary-500 dark:placeholder-feSecondary-400",placeholder:e.$t("core__fe_email_placeholder")},null,8,["value","placeholder"]),r(g,{textColor:"text-feError-500 ",class:"block mt-2"},{default:t(()=>[i(n(e.emailError),1)]),_:1})]),d("div",Te,[r(c,{class:"mb-2",textColor:"text-feSecondary-800 dark:text-feSecondary-200"},{default:t(()=>[i(n(e.$t("core__fe_password")),1)]),_:1}),r(h,{value:e.form.password,"onUpdate:value":o[7]||(o[7]=s=>e.form.password=s),ref:"password",onKeypress:o[8]||(o[8]=s=>e.pswError=""),placeholderColor:"placeholder-feSecondary-800 dark:placeholder-feSecondary-500",theme:"bg-feAchromatic-50 dark:bg-feSecondary-800",defaultBorder:"border border-feSecondary-200 hover:border-feSecondary-400 dark:border-feSecondary-400 hover:dark:border-feSecondary-50 focus:outline-none focusr_border-none focus:ring-2 focus:ring-fePrimary-300 ring-fePrimary-300 placeholder-feSecondary-500 dark:placeholder-feSecondary-400",type:e.isHide?"password":"text",placeholder:e.$t("core__fe_password_placeholder"),autocomplete:"current-password"},{icon:t(()=>[r(u,{onClick:o[6]||(o[6]=s=>e.isHide=!e.isHide),class:"cursor-pointer",name:e.isHide?"eyeOff":"eye-on"},null,8,["name"])]),_:1},8,["value","type","placeholder"]),r(g,{textColor:"text-feError-500 ",class:"block mt-2"},{default:t(()=>[i(n(e.pswError),1)]),_:1})]),d("div",He,[r(c,{class:"mb-2",textColor:"text-feSecondary-800 dark:text-feSecondary-200"},{default:t(()=>[i(n(e.$t("core__fe_conf_password")),1)]),_:1}),r(h,{value:e.form.password_confirmation,"onUpdate:value":o[10]||(o[10]=s=>e.form.password_confirmation=s),ref:"conf_password",onKeypress:o[11]||(o[11]=s=>e.confpswError=""),placeholderColor:"placeholder-feSecondary-800 dark:placeholder-feSecondary-500",theme:"bg-feAchromatic-50 dark:bg-feSecondary-800",defaultBorder:"border border-feSecondary-200 hover:border-feSecondary-400 dark:border-feSecondary-400 hover:dark:border-feSecondary-50 focus:outline-none focusr_border-none focus:ring-2 focus:ring-fePrimary-300 ring-fePrimary-300 placeholder-feSecondary-500 dark:placeholder-feSecondary-400",type:e.isHide1?"password":"text",placeholder:e.$t("core__fe_conf_password_placeholder"),autocomplete:"current-password"},{icon:t(()=>[r(u,{onClick:o[9]||(o[9]=s=>e.isHide1=!e.isHide1),class:"cursor-pointer",name:e.isHide1?"eyeOff":"eye-on"},null,8,["name"])]),_:1},8,["value","type","placeholder"]),r(g,{textColor:"text-feError-500 ",class:"block mt-2"},{default:t(()=>[i(n(e.confpswError),1)]),_:1})]),d("div",Ue,[r(C,{title:"",class:"",value:e.agreePrivacyPolicy,"onUpdate:value":o[12]||(o[12]=s=>e.agreePrivacyPolicy=s),color:"focus:ring-2 focus:ring-fePrimary-300 hover:bg-fePrimary-500 dark:hover:bg-fePrimary-500 checked:bg-fePrimary-500 dark:checked:bg-fePrimary-500 text-fePrimary-500 dark:text-fePrimary-500",textColor:"text-fePrimary-500 dark:text-fePrimary-500",onClick:e.agreePrivacyPolicyClicked},null,8,["value","onClick"]),r(c,{class:"text-sm me-2",textColor:"text-feSecondary-800 dark:text-feSecondary-200"},{default:t(()=>[i(n(e.$t("core__fe_login__check_privacy_policy")),1)]),_:1}),r(c,{textColor:"text-fePrimary-500",class:"text-sm"},{default:t(()=>[i(n(e.$t("login__privacy_policy")),1)]),_:1})]),d("div",je,[r(U,{class:"w-full mb-2",onClick:e.submit},{default:t(()=>[e.loading?(M(),Q(H,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-fePrimary-500 me-1",loadingSize:"h-5 w-5"})):X("",!0),i(" "+n(e.$t("core__fe_btn_register")),1)]),_:1},8,["onClick"])]),d("div",Be,[r(c,{class:"me-4",textColor:"text-feSecondary-800 dark:text-feSecondary-500"},{default:t(()=>[i(n(e.$t("core__fe_already_a_member")),1)]),_:1}),r(c,{class:"cursor-pointer",textColor:"text-fePrimary-500",onClick:e.singinInClicked},{default:t(()=>[i(n(e.$t("core__fe_sign_in")),1)]),_:1},8,["onClick"])])])])])])],2),r(a,{ref:"ps_error_dialog"},null,512),r(j,{ref:"privacy_modal"},null,512)],64)}var no=ge(be,[["render",Ie]]);export{no as default};
