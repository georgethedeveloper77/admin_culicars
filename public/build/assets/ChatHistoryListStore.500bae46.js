import{a as H,P as n}from"./PsApiService.9afc2356.js";import{C as d}from"./ChatHistory.c3f26661.js";import{S as w}from"./SyncChatHistoryParameterHolder.24ffbfbb.js";import{aa as S,y as c,i as L}from"./app.2982e019.js";import{m as M}from"./PsSepetetedStore.9a31ac47.js";const b=M(y=>S(`chatHistoryListStore/${y}`,()=>{const l=c({value:!1}),a=c(new H),i=c({value:!1});let u=L(6),o=0;async function v(t,e,s,C){const r=new w;r.itemId=t,r.buyerUserId=e,r.sellerUserId=s,r.type=C,await n.syncChatHistory(new d,r.toMap())}function f(t){var e,s;a!=null&&a.data!=null&&a.data.length>0&&o!=0?(t.data!=null&&t.data.length>0?(((e=t.data)==null?void 0:e.length)<u.value?l.value=!0:l.value=!1,a.data.push(...t.data)):l.value=!0,a.code=t.code,a.status=t.status,a.message=t.message):(((s=t.data)==null?void 0:s.length)<u.value||t.data==null?l.value=!0:l.value=!1,a.data=t.data,a.code=t.code,a.status=t.status,a.message=t.message),a!=null&&a.data!=null&&(o=a.data.length)}async function h(t,e){i.value=!0;const s=await n.getChatHistoryList(new d,u.value,o,t,e.toMap());f(s),i.value=!1}async function m(t,e){o=0,l.value=!1,i.value=!0;const s=await n.getChatHistoryList(new d,u.value,o,t,e.toMap());f(s),i.value=!1}async function g(t,e){i.value=!0,await n.resetUnreadMessageCount(new d,t,e.toMap()),i.value=!1}return{isNoMoreRecord:l,chatHistoryList:a,loading:i,limit:u,offset:o,postChatHistory:v,loadChatHistoryList:h,resetChatHistoryList:m,resetUnreadMessageCount:g}}));export{b as u};
