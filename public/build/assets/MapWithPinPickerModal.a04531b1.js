import{A as $,H as w}from"./index.ca53b1ec.js";import I from"./PsModal.36ad7f82.js";import S from"./PsLabelTitle.ddb6fa87.js";import V from"./PsButton.7f6705bd.js";import{u as z}from"./AppInfoStore.f8d22516.js";import{A}from"./AppInfoParameterHolder.e24d894d.js";import{P as B}from"./PsValueStore.eb9430a0.js";import D from"./PsLabel.c51f2c9d.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{d as H,i as a,o as N,f as T,w as n,b as p,q as c,t as u,a as U,r as l}from"./app.2982e019.js";import"./vue-neat-modal.2bf17e6b.js";import"./PsLine.ea3266c0.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsApiService.9afc2356.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./ps_constants.0e2a11f9.js";const W=H({name:"MapWithPinPickerModal",components:{PsModal:I,GoogleMap:$,Marker:w,PsLabelTitle:S,PsButton:V,PsLabel:D},setup(){const e=a(),t=a(),d=a();let _;const f=a(),g=a(),o=a({position:{lat:40.876945,lng:77.387978},draggable:!0}),i=a({lat:40.876945,lng:77.387978}),k=B().getLoginUserId(),s=z(),v=new A;v.userId=k;const m=a({key:"000",center:o.value.position,zoom:15});async function M(){m.value.key=s.appInfo.data.frontendConfigSetting.mapKey}M();function h(){_(f.value,g.value),e.value.toggle(!1)}function y(r){f.value=r.latLng.lat(),g.value=r.latLng.lng()}function C(r,P,L){r!=0&&(o.value.position.lat=r),P!=0&&(o.value.position.lng=P),r!=0&&P!=0&&(m.value.center=o.value.position,i.value=o.value.position,t.value!=null&&t.value.center!=null&&(t.value.map.setCenter(t.value.map.center),d.value.marker.component.value.setPosition(o.value.position))),_=L,e.value.toggle(!0)}return{psmodal:e,updateCoordinates:y,mcenter:o,map:m,openModal:C,map_ref:t,mcenter2:i,marker:d,pickedLocation:h}}}),j={class:"flex justify-end"};function q(e,t,d,_,f,g){const o=l("ps-label-title"),i=l("ps-label"),b=l("Marker"),k=l("GoogleMap"),s=l("ps-button"),v=l("ps-modal");return N(),T(v,{ref:"psmodal",isClickOut:!0},{title:n(()=>[p(o,null,{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__item_location")),1)]),_:1}),p(i,{class:"mt-2"},{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__drag_pin")),1)]),_:1})]),body:n(()=>[p(k,{id:"map",ref:"map_ref","api-key":e.map.key,center:e.mcenter2,zoom:e.map.zoom,style:{width:"100%",height:"450px"}},{default:n(()=>[p(b,{options:e.mcenter,draggable:"false",ref:"marker",onDrag:e.updateCoordinates},null,8,["options","onDrag"])]),_:1},8,["api-key","center","zoom"])]),footer:n(()=>[U("div",j,[p(s,{onClick:e.pickedLocation},{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__pick_location")),1)]),_:1},8,["onClick"]),p(s,{onClick:t[0]||(t[0]=m=>e.psmodal.toggle(!1)),class:"ms-2",theme:"btn-second"},{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__cancel")),1)]),_:1})])]),_:1},512)}var le=G(W,[["render",q]]);export{le as default};
