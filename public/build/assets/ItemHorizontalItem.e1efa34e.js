import{D as te,_ as oe,i as q,o as r,c as n,a as x,f as I,w as a,n as J,b as i,g as c,q as m,t as s,F as re,A as K,B as ae,r as A,O as ie,P as se}from"./app.2982e019.js";import le from"./PsLabel.c51f2c9d.js";import ne from"./PsLabelTitle4.c5af9ad8.js";import me from"./PsCard.f55d9058.js";import de from"./PsIcon.515a10c8.js";import{P as W}from"./ps_constants.0e2a11f9.js";import ce from"./PsAdSense.860ae425.js";import{f as fe}from"./format.min.73c0dc2e.js";import ue from"./PsRouteLink.c57ebe2e.js";import _e from"./PsLazyImage.f8cb46ec.js";import{P as Z}from"./PsValueStore.eb9430a0.js";import{P as xe}from"./Product.29c94914.js";import{u as ge}from"./PsValueHolder.6fb61a72.js";import{u as he}from"./AppInfoStore.f8d22516.js";import{u as ye}from"./ProductStore.a3320c3f.js";import{u as $}from"./FavouriteItemStore.f9ea6da9.js";import{u as pe,F as Pe}from"./FollowItemParameterHolder.15fa2bbe.js";import{A as be}from"./AppInfoParameterHolder.e24d894d.js";import{h as Se}from"./moment.9709ab41.js";import{P as ve}from"./PsUtils.bbfda905.js";import{_ as we}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsApiService.9afc2356.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemCurrency.91c8ce91.js";import"./ItemLocation.d1b92a80.js";import"./ProductRelation.0b376978.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./Vendor.d946ee87.js";import"./ProductParameterHolder.4354be0b.js";import"./Phone.45f97258.js";import"./ApiStatus.5720ba0b.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./PsSepetetedStore.9a31ac47.js";const Ie=te(()=>oe(()=>import("./PsLoadingDialog.9b6db1c6.js"),["assets/PsLoadingDialog.9b6db1c6.js","assets/PsModal.36ad7f82.js","assets/PsModal.20c3503a.css","assets/vue-neat-modal.2bf17e6b.js","assets/vue-neat-modal.29af7d11.css","assets/app.2982e019.js","assets/app.aea728e4.css","assets/PsLine.ea3266c0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/ThemeStore.40343845.js","assets/LanguageStore.8f1cddd7.js","assets/PsLabelTitle.ddb6fa87.js","assets/PsLabel.c51f2c9d.js"])),Ce={name:"ItemHorizontalItem",components:{PsLabel:le,PsLabelTitle4:ne,PsCard:me,PsIcon:de,PsAdSense:ce,PsRouteLink:ue,PsLoadingDialog:Ie,PsLazyImage:_e},props:{item:{type:xe},notShowTitle:{type:Boolean,default:!1},onClick:Function,storeName:{type:String,default:""}},setup(o){var O,R,T;const h=q();Z.psValueStore=ge();const e=ye(o.storeName),t=$(),Q=$("favourite"),X=pe(),N=Z(),f=N.getLoginUserId(),F=new be,l=new Pe;F.userId=f;const d=he(),U=q(!1),H=q(!1),M=q(o.item.user.userId==f);((T=(R=(O=d==null?void 0:d.appInfo)==null?void 0:O.data)==null?void 0:R.mobileSetting)==null?void 0:T.is_show_owner_info)=="1"&&(U.value=!0);function B(v){var E,j,D,g,y,p,P,C,k,u,_,b,S;if(v.toString()=="0"&&((j=(E=d.appInfo.data)==null?void 0:E.psAppSetting)==null?void 0:j.SelectedPriceType)==W.NORMAL_PRICE)return K("item_price__free");if(((g=(D=d.appInfo.data)==null?void 0:D.psAppSetting)==null?void 0:g.SelectedPriceType)==W.PRICE_RANGE){const L=parseFloat(v),w=parseInt(L);return w>5?"$".repeat(5):w<1?"$".repeat(1):"$".repeat(w)}else{if(((P=(p=(y=d==null?void 0:d.appInfo)==null?void 0:y.data)==null?void 0:p.mobileSetting)==null?void 0:P.price_format)==="###,###")return new Intl.NumberFormat("en-FR",{style:"decimal",useGrouping:!0,minimumFractionDigits:0}).format(v).replace(","," ");if(((u=(k=(C=d==null?void 0:d.appInfo)==null?void 0:C.data)==null?void 0:k.mobileSetting)==null?void 0:u.price_format)==="##,####"){let w=parseFloat(v).toFixed(4).split("."),V=w.pop();return V=w[0],V.replace(/(\d)(?=(\d{4})+$)/g,"$1,")}else return fe((S=(b=(_=d==null?void 0:d.appInfo)==null?void 0:_.data)==null?void 0:b.mobileSetting)==null?void 0:S.price_format,v)}}async function G(v){f&&f!=W.NO_LOGIN_USER?(H.value=!0,await ve.waitingComponent(h),h.value.openModal(),o.item.isFavourited=="1"?h.value.message=K("item_detail__removing_item_from_favourite"):h.value.message=K("item_detail__adding_item_to_favourite"),await t.postFavourite(v,f),await z(),h.value.closeModal()):ae.get(route("login"))}async function z(){o.storeName==""?await X.refleshFollowerItemList(f,l):o.storeName=="favourite"?await Q.refleshFavouriteItemList(f):await e.refleshProductList(f,e.paramHolder)}return{appInfoStore:d,formatPrice:B,PsConst:W,psValueStore:N,favouriteClicked:G,ps_loading_dialog:h,showProfile:U,moment:Se,isOwner:M,loginUserId:f,showLoadingDialog:H}}},ee=o=>(ie("data-v-191af2ee"),o=o(),se(),o),ke={class:"h-44 relative z-0"},Ae={class:"overflow-hidden h-44 w-full"},Ne={key:1,class:"absolute bg-feWarning-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Fe={key:2,class:"absolute bg-fePrimary-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Le={key:0,class:"absolute bg-feSuccess-500 rounded px-2 py-1 left-0 top-8"},ze={key:3,class:"absolute bg-feSuccess-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Oe={key:4,class:"absolute bg-feSecondary-300 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Re={key:5,class:"absolute bg-feError-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Te={class:"absolute left-2 bottom-2 z-20"},Ee=ee(()=>x("div",{class:"relative lg:pt-48 pt-28"},null,-1)),je={key:0,class:"ps-1 pt-1"},De={key:1},Ve={key:2},Ue={key:0},He={key:0},Me={key:1,class:"ps-1"},Be={key:0,class:"pt-1 pb-2 flex items-center justify-between leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},Ge={class:"flex flex-row relative items-center no-underline text-feAchromatic-900"},qe={key:0,class:"absolute top-0 left-0"},We=ee(()=>x("div",{class:"lg:w-8 lg:h-8 w-6 h-6 rounded-full absolute top-0 left-0 bg-feAchromatic-900 opacity-60"},null,-1)),Je={class:"lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center absolute"},Ke={class:"ms-2 mt-1 text-sm flex-grow"},Qe={class:"flex flex-row w-full"},Xe={key:0,class:"pt-1 pb-2 flex items-center justify-between leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},Ye={class:"flex flex-row relative items-center no-underline text-feAchromatic-900"},Ze={class:"ms-2 mt-1 text-sm flex-grow"},$e={class:"w-full lg:h-72 h-52 mx-auto lg:mt-12 lg:mb-12 mt-8 mb-6"};function et(o,h,e,t,Q,X){var M,B,G;const N=A("ps-lazy-image"),f=A("ps-route-link"),F=A("ps-icon"),l=A("ps-label"),d=A("ps-card"),U=A("ps-ad-sense"),H=A("ps-loading-dialog");return r(),n(re,null,[x("div",{class:"cursor-pointer w-full h-full pb-3",onClick:h[1]||(h[1]=z=>e.onClick!=null?e.onClick(e.item):null)},[((M=e.item)==null?void 0:M.adType)==t.PsConst.NORMAL_AD||((B=e.item)==null?void 0:B.adType)==t.PsConst.PAID_AD?(r(),I(d,{key:0,class:"flex w-full bg-feAchromatic-50 flex-col lg:rounded-lg shadow-sm",enabledHover:!0},{default:a(()=>{var z,O,R,T,v,E,j,D;return[x("div",{class:J(["lg:px-0 lg:py-0 px-1",t.showProfile?"rounded-b-xl lg:rounded-b-2xl":"rounded-xl lg:rounded-2xl"])},[x("div",ke,[i(f,{to:{name:"fe_item_detail",query:{item_id:e.item.id}},class:"absolute z-10"},{default:a(()=>[x("div",Ae,[i(N,{class:"overflow-hidden transform transition duration-500 hover:scale-110 rounded-t-lg object-cover w-screen h-44",src:o.$page.props.thumb2xUrl+"/"+e.item.defaultPhoto.imgPath,srcPlaceholder:o.$page.props.thumb1xUrl+"/"+e.item.defaultPhoto.imgPath,error:this.$page.props.sysImageUrl+"/default_photo.png"},null,8,["src","srcPlaceholder","error"])])]),_:1},8,["to"]),!e.notShowTitle&&!t.isOwner?(r(),n("div",{key:0,class:"absolute z-10 bg-feAchromatic-50 dark:bg-feSecondary-800 rounded w-10 h-10 flex justify-center items-center right-2 top-2",onClick:h[0]||(h[0]=g=>t.favouriteClicked(e.item.id))},[e.item.isFavourited=="1"?(r(),I(F,{key:0,textColor:"text-fePrimary-500 dark:text-feAchromatic-50",class:"",name:"heart",h:"24",w:"24"})):(r(),I(F,{key:1,textColor:"text-fePrimary-500 dark:text-feAchromatic-50",class:"",name:"heart-outline",h:"24",w:"24"}))])):c("",!0),e.item.status=="0"?(r(),n("div",Ne,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[m(s(o.$t("core_fe__pending")),1)]),_:1})])):c("",!0),e.item.isDiscount=="1"&&e.item.status=="1"?(r(),n("div",Fe,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[m(s(e.item.percent)+s(o.$t("item_horizontal_item__discount")),1)]),_:1}),e.item.isPaid=="1"&&e.item.paidStatus==t.PsConst.paidItemProgressStatus&&e.item.status=="1"?(r(),n("div",Le,[i(l,{class:"text-xs lg:text-sm font-medium text-center",textColor:"text-feAchromatic-50 "},{default:a(()=>[m(s(o.$t("item_horizontal_item__featured")),1)]),_:1})])):c("",!0)])):e.item.isPaid=="1"&&e.item.paidStatus==t.PsConst.paidItemProgressStatus&&e.item.status=="1"?(r(),n("div",ze,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[m(s(o.$t("item_horizontal_item__featured")),1)]),_:1})])):c("",!0),e.item.status=="2"?(r(),n("div",Oe,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feSecondary-500 "},{default:a(()=>[m(s(o.$t("core_fe__disabled")),1)]),_:1})])):c("",!0),e.item.status=="3"?(r(),n("div",Re,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[m(s(o.$t("core_fe__rejected")),1)]),_:1})])):c("",!0),x("div",Te,[e.item&&e.item.isSoldOut=="1"&&((z=t.appInfoStore)==null?void 0:z.isSoldOutFeatureSettingOn())?(r(),I(l,{key:0,class:"py-1 px-2 text-sm rounded bg-fePrimary-500 font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[m(s(o.$t("item_horizontal_item__sold_out")),1)]),_:1})):c("",!0)]),Ee]),i(f,{to:{name:"fe_item_detail",query:{item_id:e.item.id}}},{default:a(()=>{var g,y,p,P,C,k;return[e.notShowTitle?c("",!0):(r(),n("div",je,[i(l,{class:"truncate-2-lines mb-0.5 font-normal text-sm",textColor:"text-feSecondary-600 dark:text-feSecondary-200"},{default:a(()=>[m(s(e.item?e.item.title:""),1)]),_:1})])),((y=(g=t.appInfoStore.appInfo.data)==null?void 0:g.psAppSetting)==null?void 0:y.hidePricesetting)==t.PsConst.ONE&&t.loginUserId=="nologinuser"?(r(),n("div",De,[i(l,{textColor:"font-semibold text-base text-fePrimary-500 "},{default:a(()=>[m(s(e.item.itemCurrency.currencySymbol)+" ****",1)]),_:1})])):(r(),n("div",Ve,[((P=(p=t.appInfoStore.appInfo.data)==null?void 0:p.psAppSetting)==null?void 0:P.SelectedPriceType)!=t.PsConst.NO_PRICE?(r(),n("div",Ue,[e.item.isDiscount=="1"&&((k=(C=t.appInfoStore.appInfo.data)==null?void 0:C.mobileSetting)==null?void 0:k.is_show_discount)=="1"&&!e.notShowTitle?(r(),n("div",{key:0,class:J(["ps-1 flex justify-start",t.formatPrice(e.item?e.item.originalPrice:"").length>10?"flex-col":"flex-row  items-center"])},[i(l,{class:"line-through me-2 font-semibold text-xs",textColor:"text-feSecondary-500 "},{default:a(()=>{var u,_,b,S;return[m(s(e.item&&((_=(u=t.appInfoStore.appInfo.data)==null?void 0:u.psAppSetting)==null?void 0:_.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" ",1),e.item&&((S=(b=t.appInfoStore.appInfo.data)==null?void 0:b.psAppSetting)==null?void 0:S.SelectedPriceType)==t.PsConst.NORMAL_PRICE?(r(),n("span",He,s(t.formatPrice(e.item?e.item.originalPrice:"")),1)):c("",!0)]}),_:1}),i(l,{class:"font-semibold text-xs lg:text-base",textColor:"text-fePrimary-500 "},{default:a(()=>{var u,_;return[m(s(e.item&&((_=(u=t.appInfoStore.appInfo.data)==null?void 0:u.psAppSetting)==null?void 0:_.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+s(t.formatPrice(e.item?e.item.price:"")),1)]}),_:1})],2)):(r(),n("div",Me,[i(l,{class:"font-semibold text-base",textColor:"text-fePrimary-500 "},{default:a(()=>{var u,_;return[m(s(e.item&&((_=(u=t.appInfoStore.appInfo.data)==null?void 0:u.psAppSetting)==null?void 0:_.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+s(t.formatPrice(e.item?e.item.originalPrice:"")),1)]}),_:1})]))])):c("",!0)])),e.notShowTitle?c("",!0):(r(),n("div",{key:3,class:J([t.showProfile?"pb-0":"pb-2","ps-1 flex items-center"])},[i(F,{textColor:"text-feSecondary-400 dark_text-feAchromatic-500",name:"location-marker",h:"14",w:"14",class:"text-feSecondary-400 me-3",viewBox:"0 0 14 14"}),i(l,{class:"truncate font-normal text-sm",textColor:"text-feSecondary-400 dark:text-feSecondary-200"},{default:a(()=>[m(s(e.item?e.item.itemLocation.name:""),1)]),_:1})],2))]}),_:1},8,["to"])],2),((O=t.appInfoStore)==null?void 0:O.isVendorSettingOn())&&((T=(R=e.item)==null?void 0:R.vendor)==null?void 0:T.id)!=""?(r(),I(f,{key:0,to:{name:"fe_vendor_info",params:{vendorId:(E=(v=e.item)==null?void 0:v.vendor)==null?void 0:E.id}}},{default:a(()=>{var g,y,p,P,C,k,u,_;return[t.showProfile?(r(),n("div",Be,[x("div",Ge,[i(N,{class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",src:o.$page.props.thumb1xUrl+"/"+((p=(y=(g=e.item)==null?void 0:g.vendor)==null?void 0:y.logo)==null?void 0:p.imgPath),srcPlaceholder:o.$page.props.thumb1xUrl+"/"+((k=(C=(P=e.item)==null?void 0:P.vendor)==null?void 0:C.logo)==null?void 0:k.imgPath),error:o.$page.props.sysImageUrl+"/default_vendor_shop.png"},null,8,["src","srcPlaceholder","error"]),((_=(u=e.item)==null?void 0:u.vendor)==null?void 0:_.expireStatus)==t.PsConst.VendorExpiryExpiredStatus?(r(),n("div",qe,[We,x("div",Je,[i(l,{textColor:"text-[8px] text-feAchromatic-50 font-semibold"},{default:a(()=>[m(s(o.$t("Closed")),1)]),_:1})])])):c("",!0)]),x("p",Ke,[x("div",Qe,[i(l,{class:"text-xs",textColor:"text-feSecondary-800 dark:text-feSecondary-300"},{default:a(()=>{var b,S,L,w,V,Y;return[m(s(((S=(b=e.item)==null?void 0:b.vendor)==null?void 0:S.name.length)>24?((w=(L=e.item)==null?void 0:L.vendor)==null?void 0:w.name.slice(0,24))+" ...":(Y=(V=e.item)==null?void 0:V.vendor)==null?void 0:Y.name),1)]}),_:1}),i(l,{class:"p-1 ms-2 text-xxs rounded-sm bg-feWarning-500",textColor:"text-feAchromatic-50"},{default:a(()=>[m(s(o.$t("core_fe__vendor_indicator")),1)]),_:1})]),i(l,{class:"font-light text-xs",textColor:"text-feSecondary-500 dark:text-feSecondary-500"},{default:a(()=>{var b,S;return[m(s((b=e.item)!=null&&b.vendor?t.moment((S=e.item)==null?void 0:S.vendor.addedDate).format(o.$page.props.dateFormat):""),1)]}),_:1})])])):c("",!0)]}),_:1},8,["to"])):(r(),I(f,{key:1,to:{name:"fe_other_profile",params:{userId:(D=(j=e.item)==null?void 0:j.user)==null?void 0:D.userId}}},{default:a(()=>{var g,y,p,P;return[t.showProfile?(r(),n("div",Xe,[x("div",Ye,[i(N,{class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",src:o.$page.props.thumb1xUrl+"/"+((y=(g=e.item)==null?void 0:g.user)==null?void 0:y.userCoverPhoto),srcPlaceholder:o.$page.props.thumb1xUrl+"/"+((P=(p=e.item)==null?void 0:p.user)==null?void 0:P.userCoverPhoto),error:o.$page.props.sysImageUrl+"/default_profile.png"},null,8,["src","srcPlaceholder","error"]),e.item.user.isVerifybluemark=="1"?(r(),I(F,{key:0,class:"bg-feInfo-500 rounded-full absolute bottom-1 left-6",name:"bluemark",textColor:"text-feSecondary-50",w:"10",h:"10"})):c("",!0)]),x("p",Ze,[i(l,{class:"truncate text-xs",textColor:"text-feSecondary-800 dark:text-feSecondary-300"},{default:a(()=>[m(s(e.item.user.userName.length>12?e.item.user.userName.slice(0,12)+" ...":e.item.user.userName),1)]),_:1}),i(l,{class:"font-light text-xs",textColor:"text-feSecondary-500 dark:text-feSecondary-500"},{default:a(()=>[m(s(e.item?t.moment(e.item.addedDate).format(o.$page.props.dateFormat):""),1)]),_:1})])])):c("",!0)]}),_:1},8,["to"]))]}),_:1})):c("",!0),((G=e.item)==null?void 0:G.adType)==t.PsConst.GOOGLE_AD?(r(),I(d,{key:1,class:"flex w-full flex-col"},{default:a(()=>[x("div",$e,[i(U,{adFormat:"square",adStyle:"display:inline-block; width: 160px; height: 160px;",adStyleSm:"display:inline-block; width: 160px; height: 160px;",adStyleLg:"display:inline-block; width: 160px; height: 160px;"})])]),_:1})):c("",!0)]),t.showLoadingDialog?(r(),I(H,{key:0,ref:"ps_loading_dialog"},null,512)):c("",!0)],64)}var Vt=we(Ce,[["render",et],["__scopeId","data-v-191af2ee"]]);export{Vt as default};
