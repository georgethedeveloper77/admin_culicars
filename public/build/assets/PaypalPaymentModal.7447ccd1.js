import{P as h}from"./PsModal.62a4a1d3.js";import{P as M}from"./PsButton.60128369.js";import{u as $}from"./TokenStore.3c99c57f.js";import{P as x}from"./PsValueStore.eb9430a0.js";import{P as S}from"./PsErrorDialog.ccf1ce18.js";import{d as q,i as d,o as w,c as B,b as n,w as p,a as v,q as P,t as k,F as E,A as N,r as m}from"./app.2982e019.js";import{d as T}from"./dropin.482cf9a5.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.2bf17e6b.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsApiService.9afc2356.js";import"./ApiStatus.5720ba0b.js";import"./PsObject.a17ef38f.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsLabel.8e7b338e.js";import"./PsIcon.e7a5adcd.js";import"./Icons.c01eddd9.js";const D=q({name:"PaypalPaymentModal",components:{PsModal:h,PsButton:M,PsErrorDialog:S},setup(){const o=d(),e=d(),u=$();x();const r=d();let s,i;function t(a){a=="yes"?s():i(),o.value.toggle(!1)}async function l(a,_,b){o.value.toggle(!0),r.value=a,s=_,i=b;const f=await u.loadToken(r.value);console.log(f);const c=document.querySelector("#submit-button");T.create({authorization:f.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(I,y){c==null||c.addEventListener("click",function(){y.isPaymentMethodRequestable()&&setTimeout(function(){y.requestPaymentMethod(async function(C,g){if(console.log(g),C){e.value.openModal("",N("paypal_credit_card_modal__error_paid_ad"));return}localStorage.paymentNonce=g.nonce,t("yes")})},200)})})}return{psmodal:o,ps_error_dialog:e,openModal:l,actionClicked:t}}}),F=v("div",{id:"dropin-container"},null,-1),j={class:"flex justify-center mx-auto"};function z(o,e,u,r,s,i){const t=m("ps-button"),l=m("ps-modal"),a=m("ps-error-dialog");return w(),B(E,null,[n(l,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:p(()=>[F,v("div",j,[n(t,{id:"submit-button"},{default:p(()=>[P(k(o.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),n(t,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=_=>o.actionClicked("no"))},{default:p(()=>[P(k(o.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),n(a,{ref:"ps_error_dialog"},null,512)],64)}var ro=V(D,[["render",z]]);export{ro as default};
