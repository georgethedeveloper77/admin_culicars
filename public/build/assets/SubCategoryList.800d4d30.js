import{aa as le,y as ne,Z as ce,i as m,j as de,A as c,o as l,c as k,b as a,w as u,a as n,V as me,f as h,F as Y,s as re,n as $,q as G,t as H,g as w,B as ue,r as i,ab as pe}from"./app.2982e019.js";import _e from"./PsButton.7f6705bd.js";import fe from"./PsLabel.c51f2c9d.js";import be from"./PsLabelHeader4.c12a3123.js";import ge from"./PsIcon.515a10c8.js";import he from"./PsInput.5d0c1579.js";import Se from"./PsDropdown.2a6cc373.js";import ye from"./CustomCheckbox.f9ef7b38.js";import ve from"./PsBreadcrumb2.f58a42a7.js";import ke from"./PsWarningDialog3.751a8c56.js";import we from"./PsDropdownSelect.ce61e1c2.js";import Ce from"./PsLazyImage.f8cb46ec.js";import Ie from"./PsRouteLink.c57ebe2e.js";import Pe from"./PsLoadingDialog.9b6db1c6.js";import xe from"./PsSuccessDialog2.6d0aa6ad.js";import Le from"./PsErrorDialog.d6a4d7d4.js";import{P as K}from"./ps_constants.0e2a11f9.js";import{u as Ae}from"./AppInfoStore.f8d22516.js";import{A as Ue}from"./AppInfoParameterHolder.e24d894d.js";import{u as He}from"./SubCategoryStore.210a0c65.js";import{P as se,c as Ne}from"./PsApiService.9afc2356.js";import{A as ae}from"./ApiStatus.5720ba0b.js";import{m as Ve}from"./PsSepetetedStore.9a31ac47.js";import{P as Me}from"./PsValueStore.eb9430a0.js";import{f as ie}from"./index.esm.8fcef60c.js";import"./index.esm.7ce161a7.js";import Be from"./PsContentContainer.d9cdaaa2.js";import Ee from"./PsFrontendLayout.69775a00.js";import Fe from"./PsInputWithRightIcon.579b4da1.js";import Te from"./PsNoResult.e589e1e8.js";import{P as N}from"./PsUtils.bbfda905.js";import{_ as De}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsModal.36ad7f82.js";import"./vue-neat-modal.2bf17e6b.js";import"./PsLine.ea3266c0.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsLabelTitle.ddb6fa87.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./SubCategory.1b4176e0.js";import"./DefaultIcon.e76b39a5.js";import"./FooterView.722f89eb.js";import"./FooterLinkSection.2922917e.js";import"./PsLink.7aa92bdc.js";import"./PsLabelCaption.54d4aa23.js";import"./ProductParameterHolder.4354be0b.js";import"./CustomFieldStore.79b51a65.js";import"./PsStore.6f734180.js";import"./PsNavTabBar.a1e78a20.js";import"./PsIconToggle.e81615f0.js";import"./PsInputWithLeftIcon.f3f18e1b.js";import"./ItemLocationTownshipStore.fe0ada29.js";import"./ItemLocation.d1b92a80.js";import"./LocationParameterHolder.9e411c2e.js";import"./PsNavBar.15a584b5.js";import"./UserStore.cc6d36cc.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./ProductRelation.0b376978.js";import"./UserListParameterHolder.d110b747.js";import"./auth.esm.be6b9a90.js";import"./UserUnReadMessageParameterHolder.81a68b74.js";import"./AddToCartStore.71386b4c.js";import"./PsNotificationBox.7fffda98.js";import"./ProductStore.a3320c3f.js";import"./Phone.45f97258.js";import"./Product.29c94914.js";import"./Category.7c65464b.js";import"./ItemCurrency.91c8ce91.js";import"./Vendor.d946ee87.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./NotificationStore.cd066252.js";import"https://unpkg.com/delayed-scroll-restoration-polyfill@0.1.1/index.js";import"./NotificationStore.af68b63a.js";import"./NotiUnRegisterHolder.eefb692e.js";const Re=Ve(r=>le(`subCategoryScribeStore/${r}`,()=>{const s=ne({value:!1});async function V(S,p){s.value=!0;const C=await se.postSubCategoryScribe(new ae,S,p.toMap());return s.value=!1,C}async function e(S,p){s.value=!0;const C=await se.isUserSubscribed(new ae,S,p);return s.value=!1,C}return{subCategoryScription:V,isUserSubscribed:e,loading:s}}));class ze{constructor(){this.userId="",this.catId="",this.subCatIds=[]}SubCategoryScribeParameterHolder(){return this.userId="",this.catId="",this.subCatIds=[],this}toMap(){return{user_id:this.userId,cat_id:this.catId,sub_cat_ids:this.subCatIds}}}const Oe={name:"SubCategoryListView",components:{PsNoResult:Te,PsButton:_e,PsLabel:fe,PsLabelHeader4:be,PsIcon:ge,PsRouteLink:Ie,PsInput:he,PsDropdown:Se,PsLoadingDialog:Pe,PsErrorDialog:Le,CustomCheckbox:ye,PsSuccessDialog2:xe,PsBreadcrumb2:ve,PsContentContainer:Be,PsInputWithRightIcon:Fe,Head:ce,PsWarningDialog3:ke,PsDropdownSelect:we,PsLazyImage:Ce},props:["query","mobileSetting","backendSetting","tokenForFCM"],layout:Ee,setup(r){var j,ee,oe,te;localStorage.catId="";const s=(j=r.query)==null?void 0:j.cat_id,V=(ee=r.query)==null?void 0:ee.cat_name,e=He(),S=Re(),p=new ze,_=Me().getLoginUserId(),I=new Ue;I.userId=_;const Z=Ae(),L=m(!0),P=m(!1);e.limit=(te=(oe=r.mobileSetting)==null?void 0:oe.default_loading_limit)!=null?te:12;const y=m(),v=m();let A=m(""),M=m(""),U=m(!1),g=m([]),b=m([]);const x=m(),W=m(),J=[{id:"0",orderBy:"name",orderType:K.FILTERING__ASC,name:"A to Z"},{id:"1",orderBy:"name",orderType:K.FILTERING__DESC,name:"Z to A"}];async function Q(){}Q(),e.subCategoryList.data=[],e.paramHolder.catId=s,setTimeout(async()=>{await f()},1e3);function B(t){A.value=t.id,M.value=t.name,e.paramHolder.orderBy=t.orderBy,e.paramHolder.orderType=t.orderType,f()}async function E(){_!=K.NO_LOGIN_USER?(P.value==!1&&v.value.openModal(c("subcat_subscribe__how_it_works"),c("subcat_subscribe__desc"),c("payment__ok"),()=>{N.log("Ok")},()=>{N.log("Cancel")}),U.value=!0):ue.get(route("login"))}const F=ie.messaging.isSupported()?ie.messaging():null;async function T(t,d){F&&await pe.post(route("firebase.topicSubscribeForNoti"),{token:t,topic:d}).then(function(X){console.log("Subscribed to "+d+".Status Code is "+X.status)}).catch(function(X){console.log(X)})}async function D(){for(var t=0;t<g.value.length;t++)T(localStorage.deviceToken,g.value[t]);p.userId=_,p.catId=s,p.subCatIds=g.value,g.value=[];const d=await S.subCategoryScription(_,p);d.status==Ne.SUCCESS&&(await e.resetSearchSubCategoryList(_,e.paramHolder),P.value=!0,y.value.closeModal(),d.data.message=="SUBSCRIBED"?x.value.openModal(c("subcategory__subscription_status"),c("subcategory__subscription_message"),c("core_fe__done"),()=>{N.log("ok")}):d.data.message=="UNSUBSCIRBED"?x.value.openModal(c("subcategory__subscription_status"),c("subcategory__subscription_message"),c("core_fe__done"),()=>{N.log("ok")}):x.value.openModal(c("subcategory__subscription_status"),c("subcategory__subscription_message"),c("core_fe__done"),()=>{N.log("ok")}),U.value=!1,o())}function R(){f()}async function o(){b.value=[],e.subCategoryList.data.forEach(t=>{t.isSubScribe=="1"&&b.value.push(t.id+"_FE")})}async function f(){var d;y.value.closeModal(),await e.resetSearchSubCategoryList(_,e.paramHolder);const t=await S.isUserSubscribed("1",_);P.value=((d=t==null?void 0:t.data)==null?void 0:d.status)=="success",o(),y.value.closeModal(),L.value=!1}function z(){e.resetSearchSubCategoryList(_,e.paramHolder)}function O(t){if(b.value.includes(t)){let d=b.value.indexOf(t);b.value.splice(d,1)}else b.value.push(t)}function q(t){g.value=t}return de(()=>{var t;L.value==!0&&((t=e.subCategoryList)==null?void 0:t.data)==null&&y.value.closeModal()}),{updateValue:q,subCategoryStore:e,loadMore:z,subCategoryClick:O,catId:s,catName:V,currentsorting:J,sortingFilterClicked:B,activeSortingId:A,activeSortingName:M,ps_loading_dialog:y,searchClicked:R,subCatScribe:E,scribe:U,submitScribe:D,checkedSelectedList:g,subscribedSubCatList:b,success:x,ps_error_dialog:W,ps_warning_dialog:v,appInfoStore:Z,PsConst:K,initial:L}},computed:{breadcrumb(){return[{label:c("item_list__home"),url:route("dashboard")},{label:c("sub_category_list__category"),url:route("fe_category.index")},{label:this.catName,color:"text-fePrimary-500"}]}}},qe={class:"sm:mt-32 lg:mt-36 mt-28"},je={class:"flex flex-col sm:flex-row items-center justify-between mt-24 mb-5 sm:mb-6 lg:mb-8"},Ge={class:"w-full flex content-center items-center mt-7 sm:mt-0"},Ke={class:"flex-grow lg:w-72 xl:w-76 h-10 w-full sm:w-56 md:w-60"},Ze={class:"rounded-md bg-feAchromatic-50 dark:bg-feSecondary-800 shadow-xs w-44"},We={class:"z-30"},Je=["onClick"],Qe={key:0,class:"ml-4"},Xe={class:"flex flex-col"},Ye={class:"flex flex-row mb-8"},$e={class:"w-full flex flex-col"},eo={key:0,class:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-9 lg:grid-cols-12 md:gap-6 gap-4"},oo={class:"h-44 relative flex justify-center"},to={class:"w-14 h-14 absolute -bottom-7 bg-feAchromatic-50 p-3 items-center rounded-full border-2 border-white dark:bg-feSecondary-800 shadow-md"},ro={class:"h-20"},so={class:"absolute -top-3 -right-3 w-6 h-6"};function ao(r,s,V,e,S,p){const C=i("Head"),_=i("ps-breadcrumb-2"),I=i("ps-icon"),Z=i("ps-input-with-right-icon"),L=i("ps-dropdown-select"),P=i("ps-label"),y=i("ps-dropdown"),v=i("ps-button"),A=i("ps-lazy-image"),M=i("ps-route-link"),U=i("custom-checkbox"),g=i("ps-no-result"),b=i("ps-content-container"),x=i("ps-loading-dialog"),W=i("ps-success-dialog-2"),J=i("ps-error-dialog"),Q=i("ps-warning-dialog-3");return l(),k(Y,null,[a(C,{title:r.$t("sub_category_list__category")},null,8,["title"]),a(b,null,{content:u(()=>{var B,E,F,T,D,R;return[n("div",qe,[n("div",je,[a(_,{items:p.breadcrumb,class:""},null,8,["items"]),n("div",Ge,[n("div",Ke,[a(Z,{onKeyup:me(e.searchClicked,["enter"]),value:e.subCategoryStore.paramHolder.keyword,"onUpdate:value":s[1]||(s[1]=o=>e.subCategoryStore.paramHolder.keyword=o),class:"",placeholder:r.$t("sub_category_list__search")},{icon:u(()=>[e.subCategoryStore.paramHolder.keyword==""?(l(),h(I,{key:0,name:"search",class:"cursor-pointer"})):(l(),h(I,{key:1,onClick:s[0]||(s[0]=o=>[e.subCategoryStore.paramHolder.keyword="",e.searchClicked()]),name:"cross",class:"cursor-pointer"}))]),_:1},8,["onKeyup","value","placeholder"])]),a(y,{horizontalAlign:"right",h:"h-auto",class:"ms-4",rounded:"rounded-lg"},{select:u(()=>[a(L,{class:"h-10 w-10 sm:w-auto sm:ps-4 ps-2.5",border:"border border-1 border-feSecondary-200 dark:border-feSecondary-400",text:"text-sm font-medium text-feAchromatic-800 dark:text-feAchromatic-100 hidden lg:inline",iconTheme:"text-feAchromatic-800 ms-2 hidden lg:inline",leftIcon:"filter",leftIconTheme:"inline lg:hidden",selectedValue:e.activeSortingName,placeholder:r.$t("sort_by")},null,8,["selectedValue","placeholder"])]),list:u(()=>[n("div",Ze,[n("div",We,[n("div",null,[(l(!0),k(Y,null,re(e.currentsorting,o=>(l(),k("div",{key:o.id,class:"w-72 flex py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feSecondary-500 cursor-pointer items-center",onClick:f=>e.sortingFilterClicked(o)},[a(P,{class:$(["ms-2",o.id==e.activeSortingId?" font-medium":"font-light"])},{default:u(()=>[G(H(r.$t("review_entry__title"))+": "+H(o.name),1)]),_:2},1032,["class"])],8,Je))),128))])])])]),_:1}),((T=(F=(E=(B=e.appInfoStore)==null?void 0:B.appInfo)==null?void 0:E.data)==null?void 0:F.psAppSetting)==null?void 0:T.isSubcatSubscription)==e.PsConst.ONE?(l(),k("div",Qe,[e.scribe?w("",!0):(l(),h(v,{key:0,padding:"p-2",onClick:e.subCatScribe},{default:u(()=>[a(I,{class:"cursor-pointer",textColor:"text-feAchromatic-50",name:"bell-outline",h:"24",w:"24",viewBox:"0 -2 18 23"})]),_:1},8,["onClick"])),e.scribe?(l(),h(v,{key:1,padding:"p-2",onClick:e.submitScribe},{default:u(()=>[a(I,{class:"cursor-pointer",textColor:"text-feAchromatic-50",name:"bluemark",h:"24",w:"24"})]),_:1},8,["onClick"])):w("",!0)])):w("",!0)])]),n("div",Xe,[n("div",Ye,[n("div",$e,[e.subCategoryStore.subCategoryList&&e.subCategoryStore.subCategoryList.data!=null?(l(),k("div",eo,[(l(!0),k(Y,null,re((D=e.subCategoryStore.subCategoryList)==null?void 0:D.data,o=>(l(),k("div",{class:"relative w-full col-span-4 sm:col-span-2 md:col-span-3 lg:col-span-4 xl:col-span-3",key:o.id},[a(M,{class:"flex-grow",to:{name:"fe_item_list",query:{cat_id:e.catId,cat_name:e.catName,sub_cat_id:o.id,sub_cat_name:o.name,status:1}}},{default:u(()=>{var f,z,O,q;return[n("div",{class:$(["text-center cursor-pointer w-full overflow-hidden bg-feAchromatic-50 border border-feAchromatic-100 dark:border-feAchromatic-700 dark:bg-feSecondary-800 rounded-x sm:rounded-xl lg:rounded-lg hover:shadow-md",e.scribe&&e.subscribedSubCatList.filter(j=>j==o.id+"_FE").length==1?"border-2 border-fePrimary-500":""])},[n("div",oo,[a(A,{class:"transform transition duration-500 hover:scale-110 w-full h-full object-cover",src:r.$page.props.thumb3xUrl+"/"+((f=o==null?void 0:o.defaultPhoto)==null?void 0:f.imgPath),srcPlaceholder:r.$page.props.thumb1xUrl+"/"+((z=o==null?void 0:o.defaultPhoto)==null?void 0:z.imgPath),error:r.$page.props.sysImageUrl+"/default_photo.png"},null,8,["src","srcPlaceholder","error"]),n("div",to,[a(A,{class:"transform transition duration-500 hover:scale-110",src:r.$page.props.thumb2xUrl+"/"+((O=o==null?void 0:o.defaultIcon)==null?void 0:O.imgPath),srcPlaceholder:r.$page.props.thumb1xUrl+"/"+((q=o==null?void 0:o.defaultIcon)==null?void 0:q.imgPath),error:r.$page.props.sysImageUrl+"/default_photo.png"},null,8,["src","srcPlaceholder","error"])])]),n("div",ro,[a(P,{class:"peer-checked/draft:text-sky-500 pt-9 lg:text-base sm:text-sm text-base font-medium",textColor:""},{default:u(()=>[G(H(o.name.length>20?o.name.slice(0,20)+"...":o.name),1)]),_:2},1024)])],2)]}),_:2},1032,["to"]),n("div",so,[e.scribe?(l(),h(U,{key:0,isScribe:o.isSubScribe,checked:o.id+"_FE",value:o.id+"_FE",onUpdateSelectedValue:e.updateValue,selectedValue:e.checkedSelectedList,"onUpdate:selectedValue":s[2]||(s[2]=f=>e.checkedSelectedList=f),onClick:f=>e.subCategoryClick(o.id+"_FE")},null,8,["isScribe","checked","value","onUpdateSelectedValue","selectedValue","onClick"])):w("",!0)])]))),128))])):w("",!0),e.subCategoryStore.loading.value==!1&&((R=e.subCategoryStore.subCategoryList)==null?void 0:R.data)==null&&e.initial==!1?(l(),h(g,{key:1,onOnClick:e.loadMore,class:"my-6"},null,8,["onOnClick"])):w("",!0),e.subCategoryStore.loading.value==!1&&e.initial==!1?(l(),h(v,{key:2,class:$(["w-60 mx-auto mt-8",e.subCategoryStore.isNoMoreRecord.value?"hidden":""]),onClick:e.loadMore},{default:u(()=>[G(H(r.$t("sub_category_list__load_more")),1)]),_:1},8,["onClick","class"])):e.initial==!1?(l(),h(v,{key:3,class:"w-60 mx-auto mt-8",onClick:e.loadMore,disabled:!0},{default:u(()=>[G(H(r.$t("sub_category_list__loading")),1)]),_:1},8,["onClick"])):w("",!0)])])])])]}),_:1}),a(x,{ref:"ps_loading_dialog",class:"z-40"},null,512),a(W,{ref:"success"},null,512),a(J,{ref:"ps_error_dialog"},null,512),a(Q,{ref:"ps_warning_dialog"},null,512)],64)}var At=De(Oe,[["render",ao]]);export{At as default};
