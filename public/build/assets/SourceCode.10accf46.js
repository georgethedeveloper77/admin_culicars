import{U as x}from"./UpdaterLayout.c11ce6b1.js";import{P as N}from"./PsButton.60128369.js";import{P as $}from"./PsLoadingCircleDialog.c85c86cd.js";import{P as b}from"./PsErrorDialog.ccf1ce18.js";import{P as k}from"./PsSuccessDialog.4330bf2e.js";import{P as U}from"./PsReloadDialog.b061af41.js";import{d as B,p as w,i as r,B as y,o as p,c as D,b as t,w as _,a as v,t as u,f as P,q as C,A as l,Q as M,r as s}from"./app.2982e019.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsIcon.e7a5adcd.js";import"./Icons.c01eddd9.js";import"./PsModal.62a4a1d3.js";import"./vue-neat-modal.2bf17e6b.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsLabel.8e7b338e.js";import"./PsLoading.0a981307.js";const R=B({components:{UpdaterLayout:x,Link:w,PsButton:N,PsLoadingCircleDialog:$,PsErrorDialog:b,PsSuccessDialog:k,PsReloadDialog:U},props:["status"],setup(e){const o=r(),g=r(),m=r(),d=r(),c=r(0),a=window.location.search;new URLSearchParams(a).has("next")&&y.get(route("NextLaravelUpdater::addNewLangString"));function i(){y.post(route("NextLaravelUpdater::sourceCodeSync"),{},{onBefore:()=>{o.value.openModal(l("core__be_source_code_title"),l("core__be_source_code_syncing_note"))},onSuccess:n=>{console.log(M().props.status),e.status.flag=="success"&&(location.reload(!0),c.value=1,o.value.closeModal())},onError:n=>{o.value.closeModal(),d.value.openModal(l("ps_error_dialog__error"),l(n.message),"Reload","NextLaravelUpdater::sourceCode",!1,"alert-triangle")}})}return{handleCodeSync:i,ps_loading_circle_dialog:o,ps_error_dialog:g,isGoNext:c,ps_success_dialog:m,ps_reload_dialog:d}}}),V={class:"paragraph text-center"},q={class:"buttons"};function G(e,o,g,m,d,c){const a=s("ps-button"),f=s("UpdaterLayout"),i=s("ps-loading-circle-dialog"),n=s("ps-error-dialog"),S=s("ps-success-dialog"),L=s("ps-reload-dialog");return p(),D("div",null,[t(f,{title:"code_update"},{container:_(()=>[v("p",V,u(e.$t("code_update_desc")),1),v("div",q,[e.isGoNext?(p(),P(a,{key:0,onClick:o[0]||(o[0]=h=>e.handleCodeSync()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:_(()=>[C(u(e.$t("go_next")),1)]),_:1})):(p(),P(a,{key:1,onClick:o[1]||(o[1]=h=>e.handleCodeSync()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:_(()=>[C(u(e.$t("code_sync")),1)]),_:1}))])]),_:1}),t(i,{ref:"ps_loading_circle_dialog"},null,512),t(n,{ref:"ps_error_dialog"},null,512),t(S,{ref:"ps_success_dialog"},null,512),t(L,{ref:"ps_reload_dialog"},null,512)])}var eo=E(R,[["render",G]]);export{eo as default};
