import{P as he}from"./PsModal.62a4a1d3.js";import{P as be}from"./PsLoading.0a981307.js";import{P as ve}from"./PsLabel.8e7b338e.js";import{P as ge}from"./PsButton.60128369.js";import{d as ke,p as we,i as a,A as w,bB as S,o as l,c as g,b as n,w as s,a as t,f as _,g as d,q as u,t as o,F as X,s as Ce,B as x,r as h}from"./app.2982e019.js";import{P as ye}from"./PsIcon.e7a5adcd.js";import{P as Pe}from"./PsInput.8a03a303.js";import{P as $e}from"./PsInputWithRightIcon.b34d7fa0.js";import{P as Be}from"./PsLabelCaption.f2ff5485.js";import Ue from"./PsBannerIcon.d77e89fa.js";import{P as De}from"./PsConfirmDialog.89d8ddff.js";import{P as Ee}from"./PsLoadingCircleDialog.c85c86cd.js";import{P as je}from"./PsErrorDialog.ccf1ce18.js";import{P as Me}from"./PsSuccessDialog.4330bf2e.js";import{_ as Te}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.2bf17e6b.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./Icons.c01eddd9.js";import"./PsIcon1.0883f10e.js";const Se=ke({name:"PsLicenseActivateModal",components:{PsModal:he,PsLabel:ve,PsButton:ge,PsIcon:ye,PsInput:Pe,PsLabelCaption:Be,PsBannerIcon:Ue,PsConfirmDialog:De,PsLoadingCircleDialog:Ee,PsInputWithRightIcon:$e,PsLoading:be,Link:we,PsErrorDialog:je,PsSuccessDialog:Me},props:["hasError","selectedZipFileName","systemCode2","errors","status","project","purchased_code","logMessages","isCountDownShow","defaultBuilderToken"],setup(e){const r=a(),F=a(w("ps_success_dialog__success")),I=a(w("ps_success_dialog__success_message")),L=a(w("ps_confirm_dialog__yes")),O=a(),c=a(),m=a();let M;const U=a(!0);let b=a(!0),C=a(!1);const k=a(!1);let D=a(!0),y=a(!1),P=a(!1);const $=a(!1);let B=a(!0),i=a(!1),E=a(!1);const q=a();let N=a(e.selectedZipFileName),z=a("");const G=a(),J=a(),K=a(!1),R=a(!1),A=a(!1),Z=a(!1),Q=a(),Y=a(e.project.project_code!="");function ee(){M(),r.value.toggle(!1)}let V=S({backend_url:e.project.project_url,purchased_code:e.project.project_code});console.log(e.project.token);let v=S({token:e.project.token}),te=new Date(e.systemCode2).getTime(),oe=setInterval(function(){let f=new Date().getTime(),p=te-f,j=Math.floor(p/(1e3*60*60*24)),T=Math.floor(p%(1e3*60*60*24)/(1e3*60*60)),W=Math.floor(p%(1e3*60*60)/(1e3*60));z.value=j+"d : "+T+"hr : "+W+"min",p<0&&(clearInterval(oe),b.value=!1,z.value="EXPIRED")},1e3);function H(){r.value.toggle(!1)}function se(f,p,j,T,W=!0){F.value=f,I.value=p.toString(),L.value=j,r.value.toggle(!0),M=T,U.value=W}function ae(){this.$inertia.post(route("admin.dashboard.updateLicense"),V,{onBefore:()=>{D.value=!0,y.value=!0,k.value=!1},onSuccess:()=>{y.value=!1,P.value=!0,setTimeout(()=>{P.value=!1,C.value=!1},3e3)},onError:()=>{P.value=!1,y.value=!1}})}function le(){this.$inertia.post(route("admin.dashboard.updateLicense"),V,{onBefore:()=>{B.value=!0,i.value=!0,$.value=!1},onSuccess:()=>{i.value=!1,E.value=!0,setTimeout(()=>{E.value=!1,C.value=!1},3e3)},onError:()=>{E.value=!1,i.value=!1}})}function ne(){k.value=!0,D.value=!1}function re(){$.value=!0,B.value=!1}function ie(){!$.value&&!i.value&&!E.value&&!k.value&&!y.value&&!P.value&&q.value.click()}function de(f){b.value=!1;const p=f.target.files;N.value=p[0]}function ce(){N.value="",b.value=!0}function ue(f,p=0){let j=S({zipFile:f,tableSetting:p});x.post(route("admin.dashboard.activateLicense"),j,{onBefore:()=>{c.value.openModal(w("license_activating"),w("wait_msg"))},onSuccess:T=>{c.value.closeModal(),b.value=!0,e.hasError===0&&H()},onError:()=>{c.value.closeModal()}})}function _e(){let f=S({name:"defaultBuilderToken",permissions:["builderToken"]});(v.token==null||v.token=="")&&(x.post(route("api_token.default_creating_token"),f,{onSuccess:p=>{v.token=p.props.defaultBuilderToken?p.props.defaultBuilderToken:"",console.log(v.token),r.value.toggle(!1),setTimeout(()=>{r.value.toggle(!0)},1e3)}}),console.log(v.token))}function pe(){v.token!=""&&x.post(route("admin.dashboard.activateLicenseWithBuilderConnection"),v,{onBefore:()=>{c.value.openModal(w("activating"),w("wait_msg"))},onSuccess:()=>{c.value.closeModal()},onError:()=>{c.value.closeModal()}})}function me(){v.token!=""&&x.post(route("admin.dashboard.checkConnection"),v,{onBefore:()=>{c.value.openModal(w("creating_auto_sync"),w("wait_msg"))},onSuccess:()=>{c.value.closeModal(),R.value=!0,K.value=!0,A.value=!1},onError:()=>{A.value=!0,c.value.closeModal()}})}function fe(){var f;try{let p=(f=v.token)!=null?f:"";navigator.clipboard.writeText(p),Z.value=!0}catch(p){console.log(p)}}return{isClickOut:b,psmodal:r,title:F,message:I,openModal:se,actionClicked:ee,okButton:L,close:H,showIcon:U,form:V,handleUpdatePurchaseCode:ae,visible:C,ps_confirm_dialog:O,ps_error_dialog:m,importClicked:ie,handleImport:de,importFile:q,ps_loading_circle_dialog:c,loadingPurchasedCode:y,isEditPurchasedCode:k,isDisablePurchasedCode:D,successPurchasedCode:P,handlePurchasedCodeEdit:ne,loadingBackendUrl:i,isEditBackendUrl:$,isDisableBackendUrl:B,successBackendUrl:E,handleBackendUrlEdit:re,handleUpdateBackendUrl:le,selectedFile:N,doImport:ue,clearSelectedFile:ce,showcountDownDate:z,generateApiKey:_e,installClicked:pe,connect:R,reconnect:A,activate:K,tokenCopied:Z,checkConnection:me,copyToken:fe,tokenForm:v,ps_download_project_dialog:G,defaultToken:Q,ps_success_dialog:J,alreadyPurchased:Y}},mounted(){this.generateApiKey()}}),xe={class:"flex justify-end mb-3"},Fe={key:0,class:"flex flex-col"},Ie={class:"bg-primary-50 text-xl p-3 text-dark rounded w-full text-center mb-8"},Le={class:"text-green-500 animate-pulse",id:"systemCode2"},Ne={class:"w-full mt-6 px-4"},ze={class:"mb-6"},Ae={class:"mb-4"},Ve={class:""},We={class:"mb-6"},Oe={class:"mb-4"},qe={key:1,class:"mt-2 mb-6 pb-4 px-4 pt-2 bg-blue-50 flex flex-row"},Ke={class:"mt-2 me-4 text-blue-500"},Re={class:"text-base"},Ze={target:"_blank",href:"https://www.psx-builder.panacea-soft.com/project/create"},He={key:2,class:"p-4 bg-red-100 border border-red-200 rounded-md"},Xe={class:"flex justify-between flex-wrap"},Ge={class:"w-0 flex-1 flex"},Je={class:"mr-3 pt-1"},Qe={class:"text-md leading-6 font-medium"},Ye={class:"text-sm"},et={class:"flex mt-3"},tt={target:"_blank",href:"https://www.psx-builder.panacea-soft.com/project",class:"underline text-indigo-500"},ot={key:3,class:"p-4 bg-green-100 border border-red-200 rounded-md"},st={class:"flex justify-between flex-wrap"},at={class:"w-0 flex-1 flex"},lt={class:"mr-3 pt-1"},nt={class:"text-md leading-6 font-medium"},rt={class:"text-sm"},it={class:"mt-3"},dt={key:4,class:"mb-6 border rounded border-red-500 w-80 p-3"},ct={class:""},ut={key:0,class:"flex mb-2"},_t={class:""},pt={class:"text-red-500 text-base"},mt={key:1,class:"flex mb-2"},ft={class:""},ht={class:"text-green-500 text-base"},bt={class:"mb-6"},vt={class:"mb-2"},gt={target:"_blank",href:"https://www.docs.panacea-soft.com/psx-mpc/faqs/web/how-to-solve-connectivity-error-with-psx-builder",class:"underline text-indigo-500"},kt={class:"mb-2"},wt={target:"_blank",href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",class:"underline text-indigo-500"};function Ct(e,r,F,I,L,O){const c=h("ps-icon"),m=h("ps-label"),M=h("ps-banner-icon"),U=h("ps-loading"),b=h("ps-button"),C=h("ps-input-with-right-icon"),k=h("ps-label-caption"),D=h("ps-modal"),y=h("ps-confirm-dialog"),P=h("ps-loading-circle-dialog"),$=h("ps-error-dialog"),B=h("ps-success-dialog");return l(),g(X,null,[n(D,{ref:"psmodal",maxWidth:"552px",bodyHeight:"100%",line:"hidden",isClickOut:!1,theme:" px-4 py-4 rounded-lg shadow-xl",class:"z-20"},{title:s(()=>[t("div",xe,[e.isClickOut?(l(),_(c,{key:0,onClick:r[0]||(r[0]=i=>e.close()),name:"cross",theme:"text-secondary-400"})):d("",!0)]),e.isCountDownShow?(l(),g("div",Fe,[t("div",Ie,[u(o(e.$t("your_free_trial_duration_left"))+" ",1),t("span",Le,o(e.showcountDownDate),1)])])):d("",!0),e.alreadyPurchased?(l(),_(m,{key:1,class:"font-medium text-xl lg:text-2xl px-4"},{default:s(()=>[u(o(e.$t("core_be__make_connection_with_psx_builder")),1)]),_:1})):(l(),_(m,{key:2,class:"font-medium text-xl lg:text-2xl px-4"},{default:s(()=>[u(o(e.$t(e.title)),1)]),_:1}))]),body:s(()=>[t("div",Ne,[e.visible?(l(),_(M,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-8",iconColor:"white"},{default:s(()=>[u(o(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):d("",!0),t("div",ze,[t("div",Ae,[n(m,{class:"text-base mb-1"},{default:s(()=>[u(o(e.$t("installer_messages.environment.wizard.form.base_domain_label")),1)]),_:1}),n(C,{disabled:e.isDisableBackendUrl,value:e.form.backend_url,"onUpdate:value":r[3]||(r[3]=i=>e.form.backend_url=i),placeholder:e.$t("enter_backend_url")},{icon:s(()=>[e.loadingBackendUrl?(l(),_(U,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):d("",!0),e.successBackendUrl?(l(),_(m,{key:1,class:"transition-all duration-300",textColor:"text-dark dark:text-secondaryDark-black"},{default:s(()=>[u(o(e.$t("core__be_btn_saved")),1)]),_:1})):d("",!0),e.isEditBackendUrl&&!e.loadingBackendUrl&&!e.successBackendUrl?(l(),_(b,{key:2,onClick:r[1]||(r[1]=i=>e.handleUpdateBackendUrl()),class:"",padding:"p-0",colors:"text-primary-500",hover:""},{default:s(()=>[u(o(e.$t("core__be_btn_save")),1)]),_:1})):d("",!0),!e.isEditBackendUrl&&!e.loadingBackendUrl&&!e.successBackendUrl?(l(),_(c,{key:3,onClick:r[2]||(r[2]=i=>e.handleBackendUrlEdit()),name:"editPencil"})):d("",!0)]),_:1},8,["disabled","value","placeholder"]),n(k,{textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[u(o(e.errors.backend_url),1)]),_:1})]),t("div",Ve,[n(m,{class:"text-base mb-1"},{default:s(()=>[u(o(e.$t("purchase_code")),1)]),_:1}),n(C,{disabled:e.isDisablePurchasedCode,value:e.form.purchased_code,"onUpdate:value":r[6]||(r[6]=i=>e.form.purchased_code=i),placeholder:e.$t("enter_purchase_code")},{icon:s(()=>[e.loadingPurchasedCode?(l(),_(U,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):d("",!0),e.successPurchasedCode?(l(),_(m,{key:1,class:"transition-all duration-300",textColor:"text-dark dark:text-secondaryDark-black"},{default:s(()=>[u(o(e.$t("core__be_btn_saved")),1)]),_:1})):d("",!0),e.isEditPurchasedCode&&!e.loadingPurchasedCode&&!e.successPurchasedCode?(l(),_(b,{key:2,onClick:r[4]||(r[4]=i=>e.handleUpdatePurchaseCode()),class:"",padding:"p-0",colors:"text-primary-500",hover:""},{default:s(()=>[u(o(e.$t("core__be_btn_save")),1)]),_:1})):d("",!0),!e.isEditPurchasedCode&&!e.loadingPurchasedCode&&!e.successPurchasedCode?(l(),_(c,{key:3,onClick:r[5]||(r[5]=i=>e.handlePurchasedCodeEdit()),name:"editPencil"})):d("",!0)]),_:1},8,["disabled","value","placeholder"]),n(k,{textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[u(o(e.errors.purchased_code),1)]),_:1}),e.purchased_code?(l(),_(k,{key:0,textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[u(o(e.purchased_code),1)]),_:1})):d("",!0),e.alreadyPurchased?(l(),_(k,{key:1,textColor:"text-green-500 ",class:"mt-2 block"},{default:s(()=>[u(o(e.$t("core_be__already_purchased")),1)]),_:1})):d("",!0)])]),t("div",We,[t("div",Oe,[n(m,{class:"text-base mb-1"},{default:s(()=>[u(o(e.$t("setup_connection_with_builder__label")),1)]),_:1}),n(C,{value:e.tokenForm.token,"onUpdate:value":r[8]||(r[8]=i=>e.tokenForm.token=i),placeholder:e.$t("setup_connection_with_builder__enter_token"),ref:"token"},{icon:s(()=>[e.tokenCopied?(l(),_(c,{key:1,name:"check"})):(l(),_(c,{key:0,onClick:r[7]||(r[7]=i=>e.copyToken()),name:"clipboard-icon"}))]),_:1},8,["value","placeholder"])])]),!e.connect&&!e.reconnect?(l(),g("div",qe,[t("div",Ke,[n(c,{name:"warning-circle",w:"20",h:"20",viewBox:"0 0 20 20"})]),t("div",null,[n(m,{textColor:"text-secondary-900"},{default:s(()=>[t("span",Re,o(e.$t("project_create_at_ps_builder__title")),1)]),_:1}),n(m,{class:"mt-1 mb-2"},{default:s(()=>[u(o(e.$t("project_create_at_ps_builder__description")),1)]),_:1}),n(m,{textColor:"text-blue-500",class:"underline"},{default:s(()=>[t("a",Ze,o(e.$t("project_create_at_ps_builder__link")),1)]),_:1})])])):d("",!0),e.reconnect?(l(),g("div",He,[t("div",Xe,[t("div",Ge,[t("div",Je,[n(c,{name:"error-icon",theme:"text-red-500"})]),t("div",null,[t("h4",Qe,o(e.$t("setup_connection_with_builder__error_title")),1),t("p",Ye,o(e.$t("setup_connection_with_builder__error_dialog")),1),t("div",et,[t("a",tt,o(e.$t("navigate_to_builder")),1)])])])])])):d("",!0),e.connect?(l(),g("div",ot,[t("div",st,[t("div",at,[t("div",lt,[n(c,{name:"success-icon",theme:"text-green-500"})]),t("div",null,[t("h4",nt,o(e.$t("setup_connection_with_builder__success_title")),1),t("p",rt,o(e.$t("setup_connection_with_builder__success_dialog")),1)])])])])):d("",!0),t("div",it,[!e.activate&&!e.reconnect?(l(),_(b,{key:0,onClick:e.checkConnection,class:"mb-0.5",padding:"px-3 py-2"},{default:s(()=>[n(m,{textColor:"text-white"},{default:s(()=>[u(o(e.$t("setup_connection_with_builder__connect")),1)]),_:1})]),_:1},8,["onClick"])):d("",!0),!e.activate&&e.reconnect?(l(),_(b,{key:1,onClick:e.checkConnection,class:"mb-0.5",padding:"px-3 py-2"},{default:s(()=>[n(m,{textColor:"text-white"},{default:s(()=>[u(o(e.$t("setup_connection_with_builder__reconnect")),1)]),_:1})]),_:1},8,["onClick"])):d("",!0),e.activate&&e.connect?(l(),_(b,{key:2,onClick:e.installClicked,class:"mb-0.5",padding:"px-3 py-2"},{default:s(()=>[n(m,{textColor:"text-white"},{default:s(()=>[u(o(e.$t("setup_connection_with_builder__activate")),1)]),_:1})]),_:1},8,["onClick"])):d("",!0)]),e.logMessages?(l(),g("div",dt,[(l(!0),g(X,null,Ce(e.logMessages,i=>(l(),g("div",ct,[i.status==="danger"?(l(),g("div",ut,[t("div",_t,[n(c,{name:"cross",w:"20",h:"20",class:"me-4 p-0.5 inline-block align-middle font-semibold bg-red-500 border rounded-full text-white"})]),t("p",pt,o(i.message),1)])):d("",!0),i.status==="success"?(l(),g("div",mt,[t("div",ft,[n(c,{name:"check",w:"20",h:"20",class:"me-4 p-0.5 inline-block align-middle font-semibold bg-green-500 border rounded-full text-white"})]),t("p",ht,o(i.message),1)])):d("",!0)]))),256))])):d("",!0),t("div",bt,[n(m,{class:"text-base mb-3 mt-5"},{default:s(()=>[u(o(e.$t("guide_link")),1)]),_:1}),t("div",vt,[t("a",gt,o(e.$t("how_to_connect_with_psx_builder")),1)]),t("div",kt,[t("a",wt,o(e.$t("how_to_purchase_code")),1)])])])]),footer:s(()=>[]),_:1},512),n(y,{ref:"ps_confirm_dialog"},null,512),n(P,{ref:"ps_loading_circle_dialog"},null,512),n($,{ref:"ps_error_dialog"},null,512),n(B,{ref:"ps_download_project_dialog"},null,512),n(B,{ref:"ps_success_dialog"},null,512)],64)}var Ot=Te(Se,[["render",Ct]]);export{Ot as default};
