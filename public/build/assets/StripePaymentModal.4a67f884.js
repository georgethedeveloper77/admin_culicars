import{g as E,w as V}from"./stripe.esm.8fdd5063.js";import{P as w}from"./PsModal.62a4a1d3.js";import{P as N}from"./PsLabelHeader4.433dd7a4.js";import{P as B}from"./PsErrorDialog.ccf1ce18.js";import{P as D}from"./PsButton.60128369.js";import{P as M}from"./PsLoadingDialog.fd2258dd.js";import{P as x}from"./PsValueStore.eb9430a0.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import{d as L,i as b,o as y,c as S,b as r,w as n,a as $,q as u,t as c,g as O,F as T,r as l}from"./app.2982e019.js";import"./vue-neat-modal.2bf17e6b.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsLabel.8e7b338e.js";import"./PsIcon.e7a5adcd.js";import"./Icons.c01eddd9.js";import"./PsLabelTitle.dcf9f9fe.js";const j=L({components:{StripeElement:E,PsModal:w,PsLabelHeader4:N,PsButton:D,PsLoadingDialog:M,PsErrorDialog:B},setup(){const e=b(),s=x();let d,p;function f(t){t=="no"&&p(),e.value.toggle(!1)}function g(t,o){e.value.toggle(!0),d=t,p=o}const a=b(),_=s.getPublishedKey(),{stripe:i,elements:[m]}=V({key:_||"",elements:[{type:"card",options:{}}]});return{psmodal:e,openModal:g,actionClicked:f,event:a,cardElement:m,registerCard:()=>{var t,o,k,C;a.value!=null&&((t=a.value)==null?void 0:t.complete)!=null&&((o=a.value)==null?void 0:o.complete)&&((k=i.value)==null||k.elements().create("card"),(C=i.value)==null||C.createToken(m.value).then(function(h){var P;localStorage.paymentNonce=(P=h.token)==null?void 0:P.id,d(),e.value.toggle(!1)}))}}}}),q={class:"flex flex-col items-center mt-8"},H={class:"flex items-center justify-center mb-4"},K={key:0};function z(e,s,d,p,f,g){const a=l("ps-label-header-4"),_=l("StripeElement"),i=l("ps-button"),m=l("ps-modal"),v=l("ps-loading-dialog"),t=l("ps-error-dialog");return y(),S(T,null,[r(m,{ref:"psmodal",isClickOut:!1},{title:n(()=>[$("div",q,[r(a,{class:"font-bold"},{default:n(()=>[u(c(e.$t("stripe_credit_card_modal__card_entry")),1)]),_:1})])]),body:n(()=>[r(_,{element:e.cardElement,onChange:s[0]||(s[0]=o=>e.event=o)},null,8,["element"])]),footer:n(()=>[$("div",H,[r(i,{class:"text-center w-60 mx-auto",onClick:e.registerCard},{default:n(()=>[u(c(e.$t("stripe_credit_card_modal__save")),1)]),_:1},8,["onClick"]),r(i,{class:"text-center w-60 mx-auto ms-4",theme:"btn-second",onClick:s[1]||(s[1]=o=>e.actionClicked("no"))},{default:n(()=>[u(c(e.$t("stripe_credit_card_modal__cancel")),1)]),_:1})])]),default:n(()=>[e.event&&e.event.error?(y(),S("div",K,c(e.event.error.message),1)):O("",!0)]),_:1},512),r(v,{ref:"psloading",isClickOut:!1},null,512),r(t,{ref:"ps_error_dialog"},null,512)],64)}var se=F(j,[["render",z]]);export{se as default};
