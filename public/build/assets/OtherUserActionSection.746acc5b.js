import{i as B,o as c,c as f,b as u,w as I,q as h,t as C,g as v,F as E,A as a,B as P,r as U}from"./app.2982e019.js";import V from"./PsLabel.c51f2c9d.js";import A from"./PsButton.7f6705bd.js";import D from"./PsLoadingDialog.9b6db1c6.js";import H from"./PsConfirmDialog.ffeae179.js";import{u as M,U as R}from"./UserStore.cc6d36cc.js";import{P as z}from"./PsValueStore.eb9430a0.js";import{u as G}from"./AppInfoStore.f8d22516.js";import{U as q}from"./UserFollowHolder.8b598f9e.js";import{U as T}from"./UserBlockParameterHolder.5aa06675.js";import{P as x}from"./ps_constants.0e2a11f9.js";import{P as j}from"./PsUtils.bbfda905.js";import{c as L}from"./PsApiService.9afc2356.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsModal.36ad7f82.js";import"./vue-neat-modal.2bf17e6b.js";import"./PsLine.ea3266c0.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsLabelTitle.ddb6fa87.js";import"./User.0c3ba1a8.js";import"./PsObject.a17ef38f.js";import"./RatingDetail.291ad5d1.js";import"./ProductRelation.0b376978.js";import"./DefaultPhoto.cc755f93.js";import"./PsSepetetedStore.9a31ac47.js";import"./UserListParameterHolder.d110b747.js";import"./ApiStatus.5720ba0b.js";const K={name:"OtherUserProfileInfoCard",components:{PsLabel:V,PsButton:A,PsLoadingDialog:D,PsConfirmDialog:H},props:{userId:String},setup(n){const o=B(),b=B(),e=z().getLoginUserId(),s=M("other"),g=G(),i=new R().getOtherUserData(),d=new q,_=new T;i.loginUserId=e,i.id=n.userId,s.loadOtherUser(e,i);async function S(){var t,l,m,p;e&&e!=x.NO_LOGIN_USER?(o.value.openModal(),((t=s.user.data)==null?void 0:t.isFollowed)=="1"?o.value.message=a("other_profile__removing_user_from_follower_list"):o.value.message=a("other_profile__adding_user_to_follower_list"),d.userId=e,d.followedUserId=(p=(m=(l=s.user)==null?void 0:l.data)==null?void 0:m.userId)!=null?p:"",await s.postUserFollow(d),await s.loadOtherUser(e,i),o.value.closeModal()):P.get(route("login"))}function k(t){e&&e!=x.NO_LOGIN_USER?b.value.openModal(a("other_profile__confirm"),a("other_profile__confirm_to_block_user"),a("other_profile__block"),a("other_profile__cancel"),()=>{w(t)},()=>{j.log("Cancel")}):P.get(route("login"))}async function w(t){_.loginUserId=e,_.addedUserId=t,o.value.openModal(),o.value.message=a("other_profile__adding_user_to_block_list");const l=await s.blockUser(_,e);o.value.closeModal(),l.status!=L.ERROR&&l.status==L.SUCCESS&&P.get(route("dashboard"))}return{userStore:s,appInfoStore:g,LoginUserId:e,PsConst:x,psloading:o,ps_confirm_dialog:b,followClick:S,blockClicked:k}}},Q={key:0},W={key:1},X={key:1,class:"mt-5 py-2 px-4 text-center w-full border bg-feAchromatic-50 border-1 border-feSecondary-300 dark:border-feSecondary-500 dark:bg-feSecondary-800 rounded lg:w-full mx-auto"};function Y(n,o,b,r,e,s){var S,k,w,t,l,m,p;const g=U("ps-button"),i=U("ps-label"),d=U("ps-loading-dialog"),_=U("ps-confirm-dialog");return c(),f(E,null,[((S=r.userStore.user.data)==null?void 0:S.userId)!=r.LoginUserId?(c(),f("div",{key:0,class:"text-center mt-6",onClick:o[0]||(o[0]=(...O)=>r.followClick&&r.followClick(...O))},[((k=r.userStore.user.data)==null?void 0:k.isFollowed)=="0"?(c(),f("div",Q,[u(g,{rounded:"rounded",textSize:"text-sm",class:"w-full mx-auto"},{default:I(()=>[h(C(n.$t("other_profile__follow")),1)]),_:1})])):((w=r.userStore.user.data)==null?void 0:w.isFollowed)=="1"?(c(),f("div",W,[u(g,{rounded:"rounded",textSize:"text-sm",class:"w-full mx-auto"},{default:I(()=>[h(C(n.$t("other_profile__unfollow")),1)]),_:1})])):v("",!0)])):v("",!0),((p=(m=(l=(t=r.appInfoStore)==null?void 0:t.appInfo)==null?void 0:l.data)==null?void 0:m.psAppSetting)==null?void 0:p.isBlockUser)==r.PsConst.ONE?(c(),f("div",X,[u(i,{class:"text-sm cursor-pointer",onClick:o[1]||(o[1]=O=>{var y,F,N;return r.blockClicked((N=(F=(y=r.userStore.user)==null?void 0:y.data)==null?void 0:F.userId)!=null?N:"")})},{default:I(()=>[h(C(n.$t("other_profile__block_user")),1)]),_:1})])):v("",!0),u(d,{ref:"psloading",isClickOut:!1},null,512),u(_,{ref:"ps_confirm_dialog"},null,512)],64)}var xo=J(K,[["render",Y]]);export{xo as default};
