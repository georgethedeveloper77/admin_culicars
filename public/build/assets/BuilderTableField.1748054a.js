import{U as $}from"./UpdaterLayout.c11ce6b1.js";import{P as B}from"./PsButton.60128369.js";import{P as L}from"./PsLoadingCircleDialog.c85c86cd.js";import{P as S}from"./PsErrorDialog.ccf1ce18.js";import{P as x}from"./PsSuccessDialog.4330bf2e.js";import{P as C}from"./PsReloadDialog.b061af41.js";import{d as T,p as N,i as a,o as d,c as U,b as r,w as c,a as h,t as p,f as b,q as v,A as t,B as k,r as n}from"./app.2982e019.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsIcon.e7a5adcd.js";import"./Icons.c01eddd9.js";import"./PsModal.62a4a1d3.js";import"./vue-neat-modal.2bf17e6b.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsLabel.8e7b338e.js";import"./PsLoading.0a981307.js";const M=T({components:{UpdaterLayout:$,Link:N,PsButton:B,PsLoadingCircleDialog:L,PsErrorDialog:S,PsSuccessDialog:x,PsReloadDialog:C},props:["status"],setup(e){const s=a(),_=a(),y=a(),u=a(),g=a(0),o=a(!1);console.log(e.status);function l(){u.value.openModal(t("ps_success_dialog__update_process_complete"),t(e.status.msg),"Done","admin.index",!1,"checkCircle")}function m(){k.post(route("NextLaravelUpdater::builderTableFieldSync"),{},{onBefore:()=>{s.value.openModal(t("core__be_sync_table_title"),t("core__be_table_field_syncing_note")),o.value=!0},onSuccess:i=>{console.log(e.status),o.value=!1,e.status.flag=="success"&&(g.value=1,s.value.closeModal(),o.value=!0,l())},onError:i=>{o.value=!1,s.value.closeModal(),_.value.openModal(t("ps_error_dialog__error"),t(i.message),"OK")}})}function f(){o.value=!0,k.get(route("admin.index"))}return{goToDashboard:f,handleFieldTableSync:m,ps_loading_circle_dialog:s,ps_error_dialog:_,isGoNext:g,ps_success_dialog:y,ps_reload_dialog:u,openSuccessDialog:l,isLoading:o}},mounted(){this.status.flag=="success"&&this.openSuccessDialog()},beforeUpdate(){}}),E={class:"paragraph text-center"},V={class:"buttons"};function w(e,s,_,y,u,g){const o=n("ps-button"),l=n("UpdaterLayout"),m=n("ps-loading-circle-dialog"),f=n("ps-error-dialog"),i=n("ps-success-dialog"),D=n("ps-reload-dialog");return d(),U("div",null,[r(l,{title:"sync_tables_and_fields"},{container:c(()=>[h("p",E,p(e.$t("sync_tables_and_fields_desc")),1),h("div",V,[e.isLoading?(d(),b(o,{key:0,disabled:!0,class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:c(()=>[v(p(e.$t("core__be_loading")),1)]),_:1})):e.isGoNext?(d(),b(o,{key:1,onClick:s[0]||(s[0]=P=>e.goToDashboard()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:c(()=>[v(p(e.$t("go_next")),1)]),_:1})):(d(),b(o,{key:2,onClick:s[1]||(s[1]=P=>e.handleFieldTableSync()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:c(()=>[v(p(e.$t("code_sync")),1)]),_:1}))])]),_:1}),r(m,{ref:"ps_loading_circle_dialog"},null,512),r(f,{ref:"ps_error_dialog"},null,512),r(i,{ref:"ps_success_dialog"},null,512),r(D,{ref:"ps_reload_dialog"},null,512)])}var ee=F(M,[["render",w]]);export{ee as default};
