import{aa as J,B as j,D as Q,_ as X,i as g,A as a,bB as Y,o as f,c as L,b as r,E as b,Z as ee,w as n,a as y,q as u,t as _,f as k,g as U,m as T,F as oe,z as re}from"./app.2982e019.js";import{P as ae}from"./PsUtils.bbfda905.js";import{s as V,u as te}from"./CategoryStore.eba47e60.js";import"./PsStore.6f734180.js";import{m as se}from"./PsSepetetedStore.9a31ac47.js";import{P as le}from"./PsBreadcrumb2.92714552.js";import{P as S}from"./PsLabel.8e7b338e.js";import{P as F}from"./PsButton.60128369.js";import{_ as ne}from"./PsSubmitButton.59179548.js";import{P as ie,b as A}from"./PsDangerDialog.7d01f7b5.js";import{P as de}from"./PsCard.1a3f6d6f.js";import{P as D}from"./PsIcon.e7a5adcd.js";import{P as ce}from"./PsInputWithRightIcon.b34d7fa0.js";import{P as me}from"./PsCheckboxValue.a24aa2fd.js";import{P as O,a as z}from"./PsActionModal.f30347d4.js";import{P as N}from"./PsImageUpload.9c2b7872.js";import{P as M}from"./PsLabelCaption.f2ff5485.js";import{P as R}from"./PsLabelTitle3.1fa34872.js";import{_ as ue}from"./PsLayout.568c8fbc.js";import"./PsApiService.9afc2356.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./PsIcon1.0883f10e.js";import"./Icons.c01eddd9.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./PsLoading.0a981307.js";import"./PsModal.62a4a1d3.js";import"./vue-neat-modal.2bf17e6b.js";import"./ThemeStore.40343845.js";import"./LanguageStore.8f1cddd7.js";import"./PsLabelHeader4.433dd7a4.js";import"./PsDraggable.80100e15.js";import"./PsDropdown.3b1e9581.js";import"./PsDropdownSelect.b154c567.js";import"./PsToggle.5b24d11e.js";import"./toggle.ae92e5df.js";/* empty css                                                             */import"./PsTextButton.a77542e1.js";import"./PsWarningDialog.2baf785b.js";import"./index.esm.8fcef60c.js";import"./auth.esm.be6b9a90.js";import"./SideMenuStore.ed2aa07c.js";import"./SidebarMenuItem.6b029457.js";import"./PsErrorDialog.ccf1ce18.js";import"./AppInfoStore.6a348fbd.js";import"./NotificationStore.af68b63a.js";import"./index.esm.7ce161a7.js";import"./NotiUnRegisterHolder.eefb692e.js";import"./ps_constants.0e2a11f9.js";const _e=se(s=>J(`imageStore/${s}`,()=>{function d(h,m,i){const t=new FormData;t.append("image",m),t.append("_method","put"),j.post(V("image.replace",h),t,{forceFormData:!0,onBefore:()=>{i&&i("before")},onSuccess:v=>{const P=v.props.status;i&&(P.flag=="danger"?i("error"):i("success"))},onError:()=>{i&&i("error")}})}function C(h,m){j.delete(V("image.destroy",h),{onBefore:()=>{m&&m("before")},onSuccess:i=>{const t=i.props.status;m&&(t.flag=="danger"?m("error"):m("success"))},onError:()=>{m&&m("error")}})}return{replaceImageInertia:d,deleteImageInertia:C}})),pe={class:"bg-primary-50 dark:bg-primary-900 py-2.5 ps-4 rounded-t-xl"},ge={class:"w-full px-4 pt-6 sm:w-1/2"},fe=y("span",{class:"font-medium text-red-800 ms-1"},"*",-1),be=y("span",{class:"font-medium text-red-800 ms-1"},"*",-1),ye={key:1,class:"flex items-end pt-4"},ve={class:"object-cover h-48 w-96",alt:"category cover"},he=y("span",{class:"font-medium text-red-800 ms-1"},"*",-1),ke={key:4,class:"flex items-end pt-4"},Pe={class:"object-cover w-48 h-48",alt:"category icon"},Ie={class:"mb-2.5 flex flex-row justify-end"},$e={layout:ue},Io=Object.assign($e,{__name:"Edit",props:{errors:Object,category:Object,validation:Object,languages:Array,categoryLanguages:Array},setup(s){const d=s,C=Q(()=>X(()=>import("./LanguageUpdateModal.c9a1164d.js"),["assets/LanguageUpdateModal.c9a1164d.js","assets/PsToggle.efb0eb20.css","assets/PsModal.62a4a1d3.js","assets/PsModal.c627973b.css","assets/vue-neat-modal.2bf17e6b.js","assets/vue-neat-modal.29af7d11.css","assets/app.2982e019.js","assets/app.aea728e4.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/ThemeStore.40343845.js","assets/LanguageStore.8f1cddd7.js","assets/PsLabel.8e7b338e.js","assets/PsButton.60128369.js","assets/PsToggle.5b24d11e.js","assets/toggle.ae92e5df.js","assets/PsIcon.e7a5adcd.js","assets/PsIcon.ac362072.css","assets/Icons.c01eddd9.js","assets/PsInput.8a03a303.js","assets/PsLoading.0a981307.js","assets/PsLoading.de9c797f.css"])),h=g([{label:a("core__be_dashboard_label"),url:route("admin.index")},{label:a("category_module"),url:route("category.index")},{label:a("core__edit_category"),color:"text-primary-500"}]),m=te(),i=_e(),t=g(),v=g(),P=g(!1),B="_name",I=g(),$=g(),w=g(),x=g(d.category.name);let p=Y({name:d.category.name,status:d.category.status,nameForm:null,cover_id:d.category.cover?d.category.cover.id:"",icon_id:d.category.icon?d.category.icon.id:"",_method:"put"});function q(e){m.updateCategoryInertia(e,p,o=>{var c,l,E;switch(o){case"before":(c=t.value)==null||c.startLoading();break;case"success":(l=t.value)==null||l.endLoading(!0);break;case"error":(E=t.value)==null||E.endLoading(!1);break}})}function H(e){let o=d.validation.includes("cover");I.value.openModal(a("core__be_replace_cat_photo"),a("core__be_replace_img_label"),a("core__be_remove_img_label"),"imagePlus","cross","24","24",()=>{$.value.openModal(a("core__be_upload_photo"),"cloudUpload",c=>{i.replaceImageInertia(e,c)})},()=>{w.value.openModal(a("core__be_remove_label"),a("core__be_are_u_sure_remove_photo"),a("core__be_btn_confirm"),a("core__be_btn_cancel"),()=>{i.deleteImageInertia(e,c=>{switch(c){case"before":t.value.startLoading();break;case"success":t.value.endLoading(!0);break;case"error":t.value.endLoading(!1);break}})},()=>{})},!o)}function K(e){let o=d.validation.includes("icon");I.value.openModal(a("core__be_replace_cat_icon"),a("core__be_replace_icon_label"),a("core__be_remove_icon_label"),"image","trash","24","24",()=>{$.value.openModal(a("core__be_upload_icon"),"cloudUpload",c=>{i.replaceImageInertia(e,c)})},()=>{w.value.openModal(a("core__be_remove_label"),a("core__be_are_u_sure_remove_icon"),a("core__be_btn_confirm"),a("core__be_btn_cancel"),()=>{i.deleteImageInertia(e,c=>{switch(c){case"before":t.value.startLoading();break;case"success":t.value.endLoading(!0);break;case"error":t.value.endLoading(!1);break}})},()=>{})},!o)}async function W(){await ae.waitingComponent(v,P),v.value.setLanguageStrings(B,d.languages,d.categoryLanguages),v.value.openModal(B,null,!0)}function Z(e,o){x.value=e,p.nameForm=o}function G(){m.navigateToCategoryIndex()}return(e,o)=>{const c=re("lazy");return f(),L(oe,null,[r(b(ee),{title:e.$t("core__edit_category")},null,8,["title"]),r(le,{items:h.value,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),r(de,{class:"w-full h-auto"},{default:n(()=>[y("div",pe,[r(ie,{textColor:"text-secondary-800 dark:text-secondary-100"},{default:n(()=>[u(_(e.$t("core__be_category_info")),1)]),_:1})]),y("div",ge,[r(S,{class:"mb-2 text-base"},{default:n(()=>[u(_(e.$t("core__category_label")),1),fe]),_:1}),r(ce,{theme:"text-secondary-500",rounded:"rounded",placeholder:e.$t("core__category_placeholder"),placeholderColor:"placeholder-secondary-500",ref:"name",disabled:!0,value:x.value,"onUpdate:value":o[1]||(o[1]=l=>x.value=l)},{icon:n(()=>[r(D,{name:"editPencil",w:"20",h:"20",class:"cursor-pointer",onClick:o[0]||(o[0]=l=>W())})]),_:1},8,["placeholder","value"]),r(M,{textColor:"text-red-500 ",class:"block mt-2"},{default:n(()=>[u(_(s.errors.name),1)]),_:1}),r(S,{class:"mb-2 text-base"},{default:n(()=>[u(_(e.$t("core__category_photo_label")),1),be]),_:1}),s.category.cover?U("",!0):(f(),k(R,{key:0},{default:n(()=>[u(_(e.$t("core__be_recommended_size_400_200")),1)]),_:1})),s.category.cover?(f(),L("div",ye,[T(y("img",ve,null,512),[[c,{src:e.$page.props.uploadUrl+"/"+s.category.cover.img_path,loading:e.$page.props.sysImageUrl+"/loading_gif.gif",error:e.$page.props.sysImageUrl+"/default_photo.png"}]]),r(F,{type:"button",onClick:o[2]||(o[2]=l=>H(s.category.cover.id)),rounded:"rounded-full",shadow:"drop-shadow-2xl",class:"mb-2 -ms-10",colors:"bg-white text-primary-500 dark:bg-secondaryDark-black",border:"border border-1 dark:border-secondary-700 border-secondary-300",padding:"p-1.5",hover:"",focus:""},{default:n(()=>[r(D,{name:"pencil-btn",w:"21",h:"21"})]),_:1}),r(O,{ref_key:"ps_image_icon_modal",ref:$},null,512),r(z,{ref_key:"ps_action_modal",ref:I},null,512),r(A,{ref_key:"ps_danger_dialog",ref:w},null,512)])):(f(),k(N,{key:2,uploadType:"image",imageFile:b(p).cover,"onUpdate:imageFile":o[3]||(o[3]=l=>b(p).cover=l)},null,8,["imageFile"])),r(M,{textColor:"text-red-500 ",class:"block mt-2"},{default:n(()=>[u(_(s.errors.cover),1)]),_:1}),r(S,{class:"mb-2 text-base"},{default:n(()=>[u(_(e.$t("core__category_icon_label")),1),he]),_:1}),s.category.icon?U("",!0):(f(),k(R,{key:3},{default:n(()=>[u(_(e.$t("core__be_recommended_size_200_200")),1)]),_:1})),s.category.icon?(f(),L("div",ke,[T(y("img",Pe,null,512),[[c,{src:e.$page.props.uploadUrl+"/"+s.category.icon.img_path,loading:e.$page.props.sysImageUrl+"/loading_gif.gif",error:e.$page.props.sysImageUrl+"/default_photo.png"}]]),r(F,{type:"button",onClick:o[4]||(o[4]=l=>K(s.category.icon.id)),rounded:"rounded-full",shadow:"drop-shadow-2xl",class:"mb-2 -ms-10",colors:"bg-white text-primary-500 dark:bg-secondaryDark-black",border:"border border-1 dark:border-secondary-700 border-secondary-300",padding:"p-1.5",hover:"",focus:""},{default:n(()=>[r(D,{name:"pencil-btn",w:"21",h:"21"})]),_:1}),r(O,{ref_key:"ps_image_icon_modal",ref:$,ser:""},null,512),r(z,{ref_key:"ps_action_modal",ref:I},null,512),r(A,{ref_key:"ps_danger_dialog",ref:w},null,512)])):(f(),k(N,{key:5,uploadType:"icon",imageFile:b(p).icon,"onUpdate:imageFile":o[5]||(o[5]=l=>b(p).icon=l)},null,8,["imageFile"])),r(M,{textColor:"text-red-500 ",class:"m-2"},{default:n(()=>[u(_(s.errors.icon),1)]),_:1}),r(S,{class:"mb-2 text-base"},{default:n(()=>[u(_(e.$t("core__status_label")),1)]),_:1}),r(me,{value:b(p).status,"onUpdate:value":o[6]||(o[6]=l=>b(p).status=l),class:"font-normal",title:e.$t("core__publish_label")},null,8,["value","title"]),y("div",Ie,[r(F,{onClick:o[7]||(o[7]=l=>G()),type:"reset",class:"me-4",colors:"text-primary-500",hover:""},{default:n(()=>[u(_(e.$t("core__be_btn_cancel")),1)]),_:1}),r(ne,{ref_key:"psSubmitButton",ref:t,title:e.$t("core__be_btn_save"),titleSuccess:e.$t("core__be_btn_saved"),onClick:o[8]||(o[8]=l=>q(s.category.id))},null,8,["title","titleSuccess"])])]),P.value?(f(),k(b(C),{key:0,ref_key:"languageStringEntryModalRef",ref:v,onOnSaved:Z},null,512)):U("",!0)]),_:1})],64)}}});export{Io as default};
